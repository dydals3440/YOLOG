---
title: Tanstack Routerë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.
date: 2025-12-20
updatedDate: 2025-12-20
tags: [Tanstack Router]
category: DEVELOPMENT
image: '/images/tanstack-router/thumbnail.webp'
---

# Tanstack Routerë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.

í˜„ì¬ ì‚¬ë‚´ì—ì„œ ì›ì¥ ì„ ìƒë‹˜ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•´ì•¼ í•  ì¼ì´ ìƒê²¼ê³ , ê¸°ì¡´ì— `react-router-dom`ì„ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë‚˜ ì´ë²ˆ ê¸°íšŒì— `TanStack Router`ë¥¼ ì‚¬ìš©í•´ë³´ì•˜ë‹¤.

ì‹¤ì œë¡œ `TanStack Router`ë¥¼ í™œìš©í•˜ë©´ì„œ ìœ ìš©í•œ ê¸°ëŠ¥ë“¤ì´ ë§ì•˜ë‹¤. **íƒ€ì… ì•ˆì „ì„±**, **íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…**, **ê²€ìƒ‰ íŒŒë¼ë¯¸í„° ê²€ì¦**, **ë°ì´í„° ë¡œë”©** ë“± í˜„ëŒ€ì ì¸ ë¼ìš°íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ê°–ì¶°ì•¼ í•  ê¸°ëŠ¥ë“¤ì„ ëª¨ë‘ ê°–ì¶”ê³  ìˆë‹¤.

ì´ ê¸€ì—ì„œëŠ” `TanStack Router`ì˜ ì£¼ìš” ê¸°ëŠ¥ë“¤ì„ í•˜ë‚˜ì”© ì‚´í´ë³´ë©°, ì‹¤ë¬´ì—ì„œ ì–´ë–»ê²Œ í™œìš©í•  ìˆ˜ ìˆëŠ”ì§€ ì •ë¦¬í•´ë³¸ë‹¤.

---

## TanStack Router ì„¤ì¹˜

í„°ë¯¸ë„ì— ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤.

```bash
# TanStack Router ê´€ë ¨ ì˜ì¡´ì„± ì„¤ì¹˜
pnpm install @tanstack/react-router @tanstack/react-router-devtools
pnpm install -D @tanstack/router-plugin
```

`vite.config.ts`ì—ì„œ `TanStack Router` í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•œë‹¤.

```ts
// vite.config.ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import { TanStackRouterVite } from '@tanstack/router-plugin/vite';

export default defineConfig({
  plugins: [
    TanStackRouterVite({
      target: 'react',
      autoCodeSplitting: true, // ìë™ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… í™œì„±í™”
    }),
    react(),
  ],
});
```

---

## Code Based Router

`TanStack Router`ëŠ” `Code Based Router`ì™€ `File Based Router` ë‘ ê°€ì§€ ë°©ì‹ì„ ì§€ì›í•œë‹¤. ë¨¼ì € ì½”ë“œ ê¸°ë°˜ ë¼ìš°íŒ…ì„ ê°„ë‹¨íˆ ì‚´í´ë³´ì.

```tsx
// main.tsx
import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import {
  createRootRoute,
  createRoute,
  createRouter,
  RouterProvider,
  Outlet,
  Link,
} from '@tanstack/react-router';
import { TanStackRouterDevtools } from '@tanstack/react-router-devtools';

// ë£¨íŠ¸ ë¼ìš°íŠ¸ ìƒì„±
const rootRoute = createRootRoute({
  component: () => (
    <div className='p-4'>
      <nav className='flex gap-4 mb-4'>
        <Link to='/' className='[&.active]:font-bold'>
          Home
        </Link>
        <Link to='/about' className='[&.active]:font-bold'>
          About
        </Link>
      </nav>
      <Outlet />
      <TanStackRouterDevtools position='bottom-right' />
    </div>
  ),
});

// ì¸ë±ìŠ¤ ë¼ìš°íŠ¸
const indexRoute = createRoute({
  getParentRoute: () => rootRoute,
  path: '/',
  component: () => <h1>Home</h1>,
});

// About ë¼ìš°íŠ¸
const aboutRoute = createRoute({
  getParentRoute: () => rootRoute,
  path: '/about',
  component: () => <h1>About</h1>,
});

// ë¼ìš°íŠ¸ íŠ¸ë¦¬ ìƒì„±
const routeTree = rootRoute.addChildren([indexRoute, aboutRoute]);

// ë¼ìš°í„° ìƒì„±
const router = createRouter({ routeTree });

// íƒ€ì… ì•ˆì „ì„±ì„ ìœ„í•œ ëª¨ë“ˆ ì„ ì–¸
declare module '@tanstack/react-router' {
  interface Register {
    router: typeof router;
  }
}

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <RouterProvider router={router} />
  </StrictMode>
);
```

ìœ„ ì½”ë“œì—ì„œ `Register` ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„ ì–¸í•˜ë©´ `Link` ì»´í¬ë„ŒíŠ¸ì˜ `to` propsì—ì„œ **íƒ€ì… ì•ˆì „ì„±**ì„ í™•ë³´í•  ìˆ˜ ìˆë‹¤. ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ë¡œë¥¼ ì…ë ¥í•˜ë©´ TypeScriptê°€ ì—ëŸ¬ë¥¼ í‘œì‹œí•œë‹¤.

í•˜ì§€ë§Œ ì½”ë“œ ê¸°ë°˜ ë¼ìš°íŒ…ì€ ê²½ë¡œê°€ ë§ì•„ì§€ë©´ ê´€ë¦¬í•˜ê¸° ì–´ë µë‹¤. `TanStack Router`ì—ì„œëŠ” **íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…**ì„ ê¶Œì¥í•œë‹¤.

---

## File Based Router

íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…ì„ ì‚¬ìš©í•˜ë©´ íŒŒì¼ êµ¬ì¡°ê°€ ê³§ ë¼ìš°íŠ¸ êµ¬ì¡°ê°€ ëœë‹¤. `src/routes` í´ë”ë¥¼ ìƒì„±í•˜ê³  íŒŒì¼ì„ ì¶”ê°€í•˜ë©´ ìë™ìœ¼ë¡œ ë¼ìš°íŠ¸ê°€ ìƒì„±ëœë‹¤.

### ê¸°ë³¸ í´ë” êµ¬ì¡°

```
ğŸ“¦src
 â”— ğŸ“‚routes
   â”£ ğŸ“œ__root.tsx          â†’ ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ (ëª¨ë“  ë¼ìš°íŠ¸ì˜ ë¶€ëª¨)
   â”£ ğŸ“œindex.tsx           â†’ "/" ê²½ë¡œ
   â”£ ğŸ“œabout.tsx           â†’ "/about" ê²½ë¡œ
   â”£ ğŸ“‚settings
   â”ƒ â”£ ğŸ“œroute.tsx         â†’ "/settings" ë ˆì´ì•„ì›ƒ
   â”ƒ â”£ ğŸ“œindex.tsx         â†’ "/settings/" ì •í™•íˆ ë§¤ì¹­
   â”ƒ â”£ ğŸ“œprofile.tsx       â†’ "/settings/profile"
   â”ƒ â”— ğŸ“œpayment.tsx       â†’ "/settings/payment"
   â”— ğŸ“‚posts
     â”£ ğŸ“œindex.tsx         â†’ "/posts"
     â”— ğŸ“œ$postId.tsx       â†’ "/posts/:postId" ë™ì  ê²½ë¡œ
```

`routes/__root.tsx` íŒŒì¼ì„ ë§Œë“¤ë©´ ìë™ìœ¼ë¡œ ì½”ë“œê°€ ìƒì„±ëœë‹¤.

```tsx
// routes/__root.tsx
import { createRootRoute, Outlet, Link } from '@tanstack/react-router';
import { TanStackRouterDevtools } from '@tanstack/react-router-devtools';

export const Route = createRootRoute({
  component: RootComponent,
});

function RootComponent() {
  return (
    <div className='p-4'>
      <nav className='flex gap-4 mb-4 border-b pb-4'>
        <Link to='/' className='[&.active]:font-bold'>
          Home
        </Link>
        <Link to='/about' className='[&.active]:font-bold'>
          About
        </Link>
      </nav>
      <Outlet />
      <TanStackRouterDevtools />
    </div>
  );
}
```

í”ŒëŸ¬ê·¸ì¸ì´ `routeTree.gen.ts` íŒŒì¼ì„ ìë™ ìƒì„±í•˜ê³  íƒ€ì…ì„ ì œê³µí•œë‹¤.

### Nesting Routes

ì¤‘ì²© ë¼ìš°íŠ¸ë¥¼ ë§Œë“¤ë ¤ë©´ í´ë” êµ¬ì¡°ë¥¼ í™œìš©í•œë‹¤. `/settings/profile` ê²½ë¡œë¥¼ ë§Œë“¤ì–´ë³´ì.

```tsx
// routes/settings/profile.tsx
import { createFileRoute } from '@tanstack/react-router';

export const Route = createFileRoute('/settings/profile')({
  component: RouteComponent,
});

function RouteComponent() {
  return <div>Settings Profile</div>;
}
```

### index.tsx vs route.tsx

ë‘ íŒŒì¼ì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¼ê¹Œ?

- `index.tsx`: ì •í™•íˆ í•´ë‹¹ ê²½ë¡œì—ë§Œ ë§¤ì¹­ëœë‹¤ (`/settings/`)
- `route.tsx`: ë ˆì´ì•„ì›ƒ ì—­í• ì„ í•˜ë©° í•˜ìœ„ ê²½ë¡œì—ë„ ì ìš©ëœë‹¤ (`/settings`, `/settings/profile`, `/settings/payment`)

```tsx
// routes/settings/route.tsx - ë ˆì´ì•„ì›ƒ ì—­í• 
import { createFileRoute, Link, Outlet } from '@tanstack/react-router';

export const Route = createFileRoute('/settings')({
  component: SettingsLayout,
});

function SettingsLayout() {
  return (
    <div>
      <h1>Settings</h1>
      <nav className='flex gap-4 mb-4 bg-gray-100 p-2'>
        <Link
          to='/settings'
          activeOptions={{ exact: true }} // ì •í™•íˆ /settingsì—ë§Œ active
          className='[&.active]:font-bold'
        >
          General
        </Link>
        <Link to='/settings/profile' className='[&.active]:font-bold'>
          Profile
        </Link>
        <Link to='/settings/payment' className='[&.active]:font-bold'>
          Payment
        </Link>
      </nav>
      <Outlet />
    </div>
  );
}
```

```tsx
// routes/settings/index.tsx - /settings/ ì •í™•íˆ ë§¤ì¹­
import { createFileRoute } from '@tanstack/react-router';

export const Route = createFileRoute('/settings/')({
  component: () => <div>General Settings</div>,
});
```

### Pathless Layout

URLì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ë ˆì´ì•„ì›ƒë§Œ ê³µìœ í•˜ê³  ì‹¶ë‹¤ë©´ ì–¸ë”ìŠ¤ì½”ì–´(`_`) ì ‘ë‘ì‚¬ë¥¼ ì‚¬ìš©í•œë‹¤.

```
ğŸ“¦routes
 â”£ ğŸ“‚_authenticated        â†’ URLì— í¬í•¨ë˜ì§€ ì•ŠìŒ
 â”ƒ â”£ ğŸ“œroute.tsx           â†’ ë ˆì´ì•„ì›ƒë§Œ ì œê³µ
 â”ƒ â”£ ğŸ“œdashboard.tsx       â†’ "/dashboard"
 â”ƒ â”— ğŸ“œprofile.tsx         â†’ "/profile"
 â”— ğŸ“œlogin.tsx              â†’ "/login"
```

```tsx
// routes/_authenticated/route.tsx
import { createFileRoute, Outlet, redirect } from '@tanstack/react-router';

export const Route = createFileRoute('/_authenticated')({
  beforeLoad: async ({ context }) => {
    if (!context.auth.isAuthenticated) {
      throw redirect({ to: '/login' });
    }
  },
  component: () => (
    <div className='authenticated-layout'>
      <Outlet />
    </div>
  ),
});
```

`_authenticated` í´ë” ì•ˆì˜ `dashboard.tsx`ëŠ” `/dashboard` ê²½ë¡œê°€ ë˜ê³ , `profile.tsx`ëŠ” `/profile` ê²½ë¡œê°€ ëœë‹¤. í´ë”ëª…ì´ URLì— í¬í•¨ë˜ì§€ ì•ŠëŠ”ë‹¤.

---

## Ignored Folders

ë¼ìš°íŠ¸ ìƒì„±ì—ì„œ ì œì™¸í•˜ê³  ì‹¶ì€ í´ë”ëŠ” `-` ì ‘ë‘ì‚¬ë¥¼ ì‚¬ìš©í•œë‹¤.

```
ğŸ“¦routes
 â”£ ğŸ“‚-components           â†’ ë¼ìš°íŠ¸ ìƒì„± ì•ˆ ë¨
 â”ƒ â”£ ğŸ“œButton.tsx
 â”ƒ â”— ğŸ“œModal.tsx
 â”£ ğŸ“‚-utils                 â†’ ë¼ìš°íŠ¸ ìƒì„± ì•ˆ ë¨
 â”ƒ â”— ğŸ“œhelpers.ts
 â”— ğŸ“œindex.tsx              â†’ "/" ë¼ìš°íŠ¸
```

`-components`ë‚˜ `-utils` í´ë”ëŠ” ë¼ìš°íŠ¸ë¡œ ì¸ì‹ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ê³µí†µ ì»´í¬ë„ŒíŠ¸ë‚˜ ìœ í‹¸ë¦¬í‹°ë¥¼ ì €ì¥í•˜ëŠ” ë° í™œìš©í•  ìˆ˜ ìˆë‹¤.

---

## Flat Routes

í´ë” ì—†ì´ ì (`.`) í‘œê¸°ë²•ìœ¼ë¡œ ì¤‘ì²© ë¼ìš°íŠ¸ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.

```
ğŸ“¦routes
 â”£ ğŸ“œ__root.tsx
 â”£ ğŸ“œindex.tsx              â†’ "/"
 â”£ ğŸ“œsettings.tsx           â†’ "/settings" ë ˆì´ì•„ì›ƒ
 â”£ ğŸ“œsettings.profile.tsx   â†’ "/settings/profile"
 â”£ ğŸ“œsettings.payment.tsx   â†’ "/settings/payment"
 â”— ğŸ“œabout.tsx              â†’ "/about"
```

`settings.profile.tsx` íŒŒì¼ì€ `/settings/profile` ê²½ë¡œì— ë§¤í•‘ëœë‹¤. í´ë” êµ¬ì¡° ì—†ì´ë„ ì¤‘ì²© ë¼ìš°íŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì–´ ê°„ë‹¨í•œ í”„ë¡œì íŠ¸ì—ì„œ ìœ ìš©í•˜ë‹¤.

---

## Dynamic Path Segments

ë™ì  ê²½ë¡œ íŒŒë¼ë¯¸í„°ëŠ” `$` ì ‘ë‘ì‚¬ë¥¼ ì‚¬ìš©í•œë‹¤.

```
ğŸ“¦routes
 â”— ğŸ“‚posts
   â”£ ğŸ“œindex.tsx            â†’ "/posts"
   â”— ğŸ“œ$postId.tsx          â†’ "/posts/:postId"
```

```tsx
// routes/posts/$postId.tsx
import { createFileRoute } from '@tanstack/react-router';

export const Route = createFileRoute('/posts/$postId')({
  component: PostComponent,
});

function PostComponent() {
  const { postId } = Route.useParams();
  return <div>Post ID: {postId}</div>;
}
```

ì—¬ëŸ¬ ê°œì˜ ë™ì  íŒŒë¼ë¯¸í„°ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```
ğŸ“¦routes
 â”— ğŸ“‚users
   â”— ğŸ“‚$userId
     â”— ğŸ“œ$postId.tsx        â†’ "/users/:userId/:postId"
```

```tsx
// routes/users/$userId/$postId.tsx
import { createFileRoute } from '@tanstack/react-router';

export const Route = createFileRoute('/users/$userId/$postId')({
  component: UserPostComponent,
});

function UserPostComponent() {
  const { userId, postId } = Route.useParams();
  return (
    <div>
      User: {userId}, Post: {postId}
    </div>
  );
}
```

---

## Catch All Routes

`$.tsx` íŒŒì¼ì„ ì‚¬ìš©í•˜ë©´ ëª¨ë“  í•˜ìœ„ ê²½ë¡œë¥¼ ìº¡ì²˜í•  ìˆ˜ ìˆë‹¤.

```
ğŸ“¦routes
 â”£ ğŸ“œindex.tsx              â†’ "/"
 â”— ğŸ“œ$.tsx                   â†’ ëª¨ë“  ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²½ë¡œ
```

```tsx
// routes/$.tsx
import { createFileRoute } from '@tanstack/react-router';

export const Route = createFileRoute('/$')({
  component: CatchAllComponent,
});

function CatchAllComponent() {
  const { _splat } = Route.useParams();
  return (
    <div>
      <h1>404 Not Found</h1>
      <p>ê²½ë¡œ: /{_splat}</p>
    </div>
  );
}
```

`_splat` íŒŒë¼ë¯¸í„°ë¡œ ìº¡ì²˜ëœ ì „ì²´ ê²½ë¡œì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. `/foo/bar/baz` ê²½ë¡œë¡œ ì ‘ê·¼í•˜ë©´ `_splat`ì€ `foo/bar/baz`ê°€ ëœë‹¤.

íŠ¹ì • ê²½ë¡œ í•˜ìœ„ì˜ ëª¨ë“  ê²½ë¡œë¥¼ ìº¡ì²˜í•  ìˆ˜ë„ ìˆë‹¤.

```
ğŸ“¦routes
 â”— ğŸ“‚docs
   â”£ ğŸ“œindex.tsx            â†’ "/docs"
   â”— ğŸ“œ$.tsx                 â†’ "/docs/*"
```

---

## Search Parameters

`TanStack Router`ì˜ ê°•ë ¥í•œ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ëŠ” **íƒ€ì… ì•ˆì „í•œ ê²€ìƒ‰ íŒŒë¼ë¯¸í„°**ë‹¤.

### ê²€ìƒ‰ íŒŒë¼ë¯¸í„° ê²€ì¦

`validateSearch`ë¥¼ ì‚¬ìš©í•˜ë©´ ê²€ìƒ‰ íŒŒë¼ë¯¸í„°ë¥¼ ê²€ì¦í•˜ê³  íƒ€ì…ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

```tsx
// routes/posts.tsx
import { createFileRoute } from '@tanstack/react-router';

type PostsSearch = {
  page: number;
  filter?: string;
  sort?: 'asc' | 'desc';
};

export const Route = createFileRoute('/posts')({
  validateSearch: (search: Record<string, unknown>): PostsSearch => ({
    page: Number(search.page) || 1,
    filter: search.filter as string | undefined,
    sort:
      search.sort === 'asc' || search.sort === 'desc' ? search.sort : undefined,
  }),
  component: PostsComponent,
});

function PostsComponent() {
  const { page, filter, sort } = Route.useSearch();
  return (
    <div>
      <p>Page: {page}</p>
      <p>Filter: {filter || 'none'}</p>
      <p>Sort: {sort || 'default'}</p>
    </div>
  );
}
```

### Zodë¥¼ í™œìš©í•œ ê²€ì¦

`Zod`ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ë” ê°•ë ¥í•œ ê²€ì¦ì´ ê°€ëŠ¥í•˜ë‹¤.

```tsx
// routes/products.tsx
import { createFileRoute } from '@tanstack/react-router';
import { z } from 'zod';

const productsSearchSchema = z.object({
  page: z.number().catch(1),
  category: z.string().optional(),
  minPrice: z.number().optional(),
  maxPrice: z.number().optional(),
  sort: z.enum(['price', 'name', 'date']).catch('date'),
});

type ProductsSearch = z.infer<typeof productsSearchSchema>;

export const Route = createFileRoute('/products')({
  validateSearch: (search) => productsSearchSchema.parse(search),
  component: ProductsComponent,
});

function ProductsComponent() {
  const search = Route.useSearch();
  // searchëŠ” ProductsSearch íƒ€ì…ìœ¼ë¡œ ì¶”ë¡ ë¨
  return <div>Category: {search.category}</div>;
}
```

### ê²€ìƒ‰ íŒŒë¼ë¯¸í„° ì—…ë°ì´íŠ¸

`Link` ì»´í¬ë„ŒíŠ¸ë‚˜ `useNavigate` í›…ìœ¼ë¡œ ê²€ìƒ‰ íŒŒë¼ë¯¸í„°ë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.

```tsx
import { Link, useNavigate } from '@tanstack/react-router';
import { Route } from './products';

function ProductFilters() {
  const navigate = useNavigate({ from: Route.fullPath });
  const search = Route.useSearch();

  return (
    <div>
      {/* Linkë¡œ ì—…ë°ì´íŠ¸ */}
      <Link
        to='/products'
        search={(prev) => ({ ...prev, page: prev.page + 1 })}
      >
        Next Page
      </Link>

      {/* useNavigateë¡œ ì—…ë°ì´íŠ¸ */}
      <button
        onClick={() =>
          navigate({
            search: (prev) => ({ ...prev, category: 'electronics' }),
          })
        }
      >
        Electronics
      </button>

      {/* ê²€ìƒ‰ íŒŒë¼ë¯¸í„° ì´ˆê¸°í™” */}
      <button
        onClick={() =>
          navigate({
            search: { page: 1 },
          })
        }
      >
        Reset
      </button>
    </div>
  );
}
```

---

## Link Component ì‹¬í™”

`Link` ì»´í¬ë„ŒíŠ¸ëŠ” ë‹¤ì–‘í•œ ì˜µì…˜ì„ ì œê³µí•œë‹¤.

### activeOptions

```tsx
<Link
  to='/posts'
  activeOptions={{
    exact: true, // ì •í™•íˆ ì¼ì¹˜í•  ë•Œë§Œ active
    includeSearch: true, // ê²€ìƒ‰ íŒŒë¼ë¯¸í„°ë„ ë¹„êµ
    includeHash: true, // í•´ì‹œë„ ë¹„êµ
  }}
  activeProps={{ className: 'active' }}
  inactiveProps={{ className: 'inactive' }}
>
  Posts
</Link>
```

### preload ì˜µì…˜

ì‚¬ìš©ìê°€ ë§í¬ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ë¯¸ë¦¬ ë°ì´í„°ë¥¼ ë¡œë“œí•  ìˆ˜ ìˆë‹¤.

```tsx
<Link
  to='/posts/$postId'
  params={{ postId: '123' }}
  preload='intent' // hoverì‹œ í”„ë¦¬ë¡œë“œ
  preloadDelay={100} // 100ms í›„ í”„ë¦¬ë¡œë“œ ì‹œì‘
>
  Post 123
</Link>
```

---

## Programmatic Navigation

`useNavigate` í›…ì„ ì‚¬ìš©í•˜ë©´ í”„ë¡œê·¸ë˜ë° ë°©ì‹ìœ¼ë¡œ í˜ì´ì§€ë¥¼ ì´ë™í•  ìˆ˜ ìˆë‹¤.

```tsx
import { useNavigate } from '@tanstack/react-router';

function LoginForm() {
  const navigate = useNavigate();

  const handleSubmit = async (data: LoginData) => {
    await login(data);

    // ê¸°ë³¸ ì´ë™
    navigate({ to: '/dashboard' });

    // íŒŒë¼ë¯¸í„°ì™€ í•¨ê»˜ ì´ë™
    navigate({
      to: '/users/$userId',
      params: { userId: '123' },
    });

    // ê²€ìƒ‰ íŒŒë¼ë¯¸í„°ì™€ í•¨ê»˜ ì´ë™
    navigate({
      to: '/products',
      search: { category: 'electronics', page: 1 },
    });

    // replaceë¡œ íˆìŠ¤í† ë¦¬ ëŒ€ì²´
    navigate({
      to: '/dashboard',
      replace: true,
    });
  };

  return <form onSubmit={handleSubmit}>...</form>;
}
```

`router` ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.

```tsx
import { useRouter } from '@tanstack/react-router';

function Component() {
  const router = useRouter();

  const handleClick = () => {
    // í”„ë¡œê·¸ë˜ë° ë°©ì‹ ì´ë™
    router.navigate({ to: '/about' });

    // ë’¤ë¡œ ê°€ê¸°
    router.history.back();

    // ì•ìœ¼ë¡œ ê°€ê¸°
    router.history.forward();
  };
}
```

---

## Context

ë¼ìš°í„° ì „ì—­ì—ì„œ ë°ì´í„°ë¥¼ ê³µìœ í•˜ë ¤ë©´ Contextë¥¼ ì‚¬ìš©í•œë‹¤. ì¸ì¦ ì •ë³´, API í´ë¼ì´ì–¸íŠ¸ ë“±ì„ ì „ë‹¬í•˜ëŠ” ë° ìœ ìš©í•˜ë‹¤.

```tsx
// routes/__root.tsx
import { createRootRouteWithContext, Outlet } from '@tanstack/react-router';

interface RouterContext {
  auth: {
    isAuthenticated: boolean;
    user: User | null;
  };
  queryClient: QueryClient;
}

export const Route = createRootRouteWithContext<RouterContext>()({
  component: RootComponent,
});

function RootComponent() {
  return <Outlet />;
}
```

```tsx
// main.tsx
import { createRouter, RouterProvider } from '@tanstack/react-router';
import { routeTree } from './routeTree.gen';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';

const queryClient = new QueryClient();

const router = createRouter({
  routeTree,
  context: {
    auth: undefined!, // ë‚˜ì¤‘ì— Providerì—ì„œ ì£¼ì…
    queryClient,
  },
});

function App() {
  const auth = useAuth(); // ì¸ì¦ ìƒíƒœ í›…

  return (
    <QueryClientProvider client={queryClient}>
      <RouterProvider router={router} context={{ auth, queryClient }} />
    </QueryClientProvider>
  );
}
```

ìì‹ ë¼ìš°íŠ¸ì—ì„œ ì»¨í…ìŠ¤íŠ¸ì— ì ‘ê·¼í•œë‹¤.

```tsx
// routes/_authenticated/dashboard.tsx
import { createFileRoute } from '@tanstack/react-router';

export const Route = createFileRoute('/_authenticated/dashboard')({
  beforeLoad: ({ context }) => {
    // context.auth, context.queryClient ì‚¬ìš© ê°€ëŠ¥
    console.log('User:', context.auth.user);
  },
  component: DashboardComponent,
});

function DashboardComponent() {
  const { auth } = Route.useRouteContext();
  return <div>Welcome, {auth.user?.name}</div>;
}
```

---

## Loader Function

`loader` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ë¼ìš°íŠ¸ê°€ ë Œë”ë§ë˜ê¸° ì „ì— ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ë¡œë“œí•  ìˆ˜ ìˆë‹¤.

### ê¸°ë³¸ ì‚¬ìš©ë²•

```tsx
// routes/posts/$postId.tsx
import { createFileRoute } from '@tanstack/react-router';

async function fetchPost(postId: string) {
  const response = await fetch(`/api/posts/${postId}`);
  if (!response.ok) throw new Error('Failed to fetch post');
  return response.json();
}

export const Route = createFileRoute('/posts/$postId')({
  loader: async ({ params }) => {
    const post = await fetchPost(params.postId);
    return { post };
  },
  component: PostComponent,
});

function PostComponent() {
  const { post } = Route.useLoaderData();
  return (
    <article>
      <h1>{post.title}</h1>
      <p>{post.content}</p>
    </article>
  );
}
```

### loaderì—ì„œ ê²€ìƒ‰ íŒŒë¼ë¯¸í„°ì™€ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©

```tsx
export const Route = createFileRoute('/products')({
  validateSearch: (search) => ({
    page: Number(search.page) || 1,
    category: search.category as string | undefined,
  }),
  loader: async ({ search, context }) => {
    const products = await context.queryClient.fetchQuery({
      queryKey: ['products', search],
      queryFn: () => fetchProducts(search.page, search.category),
    });
    return { products };
  },
  component: ProductsComponent,
});
```

### ë³‘ë ¬ ë°ì´í„° ë¡œë”©

ì—¬ëŸ¬ ë°ì´í„°ë¥¼ ë³‘ë ¬ë¡œ ë¡œë“œí•˜ë ¤ë©´ `Promise.all`ì„ ì‚¬ìš©í•œë‹¤.

```tsx
export const Route = createFileRoute('/dashboard')({
  loader: async ({ context }) => {
    const [user, notifications, stats] = await Promise.all([
      fetchUser(context.auth.user.id),
      fetchNotifications(),
      fetchStats(),
    ]);
    return { user, notifications, stats };
  },
  component: DashboardComponent,
});
```

### Pending UI

ë°ì´í„° ë¡œë”© ì¤‘ í‘œì‹œí•  UIë¥¼ ì§€ì •í•œë‹¤.

```tsx
export const Route = createFileRoute('/posts')({
  loader: async () => {
    const posts = await fetchPosts();
    return { posts };
  },
  pendingComponent: () => <div>Loading posts...</div>,
  pendingMs: 200, // 200ms í›„ì— pending UI í‘œì‹œ
  pendingMinMs: 500, // ìµœì†Œ 500ms ë™ì•ˆ pending UI ìœ ì§€
  component: PostsComponent,
});
```

---

## Error Handling

### errorComponent

ë°ì´í„° ë¡œë”©ì´ë‚˜ ë Œë”ë§ ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ `errorComponent`ê°€ í‘œì‹œëœë‹¤.

```tsx
export const Route = createFileRoute('/posts/$postId')({
  loader: async ({ params }) => {
    const post = await fetchPost(params.postId);
    return { post };
  },
  errorComponent: ({ error, reset }) => (
    <div className='error'>
      <h2>Error occurred</h2>
      <p>{error.message}</p>
      <button onClick={reset}>Try again</button>
    </div>
  ),
  component: PostComponent,
});
```

### Not Found ì²˜ë¦¬

ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤ì— ëŒ€í•´ `notFound()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

```tsx
import { createFileRoute, notFound } from '@tanstack/react-router';

export const Route = createFileRoute('/posts/$postId')({
  loader: async ({ params }) => {
    const post = await fetchPost(params.postId);
    if (!post) {
      throw notFound();
    }
    return { post };
  },
  notFoundComponent: () => (
    <div>
      <h2>Post not found</h2>
      <p>The post you're looking for doesn't exist.</p>
    </div>
  ),
  component: PostComponent,
});
```

### ì „ì—­ ì—ëŸ¬ ì²˜ë¦¬

ë£¨íŠ¸ ë¼ìš°íŠ¸ì—ì„œ ì „ì—­ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

```tsx
// routes/__root.tsx
export const Route = createRootRoute({
  errorComponent: ({ error }) => (
    <div className='global-error'>
      <h1>Something went wrong</h1>
      <pre>{error.message}</pre>
    </div>
  ),
  notFoundComponent: () => (
    <div className='not-found'>
      <h1>404</h1>
      <p>Page not found</p>
    </div>
  ),
  component: RootComponent,
});
```

---

## Code Splitting

`TanStack Router`ëŠ” ìë™ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ì„ ì§€ì›í•œë‹¤.

### ìë™ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…

`vite.config.ts`ì—ì„œ `autoCodeSplitting`ì„ í™œì„±í™”í•˜ë©´ ê° ë¼ìš°íŠ¸ê°€ ìë™ìœ¼ë¡œ ë³„ë„ ì²­í¬ë¡œ ë¶„ë¦¬ëœë‹¤.

```ts
// vite.config.ts
TanStackRouterVite({
  autoCodeSplitting: true,
}),
```

### ìˆ˜ë™ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…

ë” ì„¸ë°€í•œ ì œì–´ê°€ í•„ìš”í•˜ë©´ `.lazy.tsx` íŒŒì¼ì„ ì‚¬ìš©í•œë‹¤.

```tsx
// routes/posts.tsx - ë¼ìš°íŠ¸ ì„¤ì •ë§Œ í¬í•¨
import { createFileRoute } from '@tanstack/react-router';

export const Route = createFileRoute('/posts')({
  validateSearch: (search) => ({
    page: Number(search.page) || 1,
  }),
  loader: async ({ search }) => {
    const posts = await fetchPosts(search.page);
    return { posts };
  },
});
```

```tsx
// routes/posts.lazy.tsx - ì»´í¬ë„ŒíŠ¸ë§Œ í¬í•¨
import { createLazyFileRoute } from '@tanstack/react-router';

export const Route = createLazyFileRoute('/posts')({
  component: PostsComponent,
  pendingComponent: () => <div>Loading...</div>,
  errorComponent: ({ error }) => <div>Error: {error.message}</div>,
});

function PostsComponent() {
  const { posts } = Route.useLoaderData();
  return <div>{/* ... */}</div>;
}
```

---

## Preloading

ì‚¬ìš©ìê°€ ë§í¬ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ë¯¸ë¦¬ ë°ì´í„°ë¥¼ ë¡œë“œí•˜ì—¬ í˜ì´ì§€ ì „í™˜ì„ ë¹ ë¥´ê²Œ í•œë‹¤.

### ì „ì—­ í”„ë¦¬ë¡œë“œ ì„¤ì •

```tsx
const router = createRouter({
  routeTree,
  defaultPreload: 'intent', // hoverì‹œ í”„ë¦¬ë¡œë“œ
  defaultPreloadStaleTime: 0, // í•­ìƒ ìƒˆë¡œìš´ ë°ì´í„° ë¡œë“œ
});
```

### ë¼ìš°íŠ¸ë³„ í”„ë¦¬ë¡œë“œ ì„¤ì •

```tsx
export const Route = createFileRoute('/posts/$postId')({
  loader: async ({ params, preload }) => {
    // preloadê°€ trueë©´ í”„ë¦¬ë¡œë”© ì¤‘
    const post = await fetchPost(params.postId);
    return { post };
  },
  // í”„ë¦¬ë¡œë“œëœ ë°ì´í„°ê°€ 30ì´ˆ ë™ì•ˆ ìœ íš¨
  staleTime: 30_000,
});
```

### ìˆ˜ë™ í”„ë¦¬ë¡œë“œ

```tsx
import { useRouter } from '@tanstack/react-router';

function Component() {
  const router = useRouter();

  const handleMouseEnter = () => {
    router.preloadRoute({
      to: '/posts/$postId',
      params: { postId: '123' },
    });
  };

  return <div onMouseEnter={handleMouseEnter}>Hover me</div>;
}
```

---

## Caching

`TanStack Router`ëŠ” ë¡œë” ë°ì´í„°ë¥¼ ìºì‹±í•˜ì—¬ ë¶ˆí•„ìš”í•œ ìš”ì²­ì„ ì¤„ì¸ë‹¤.

### ìºì‹œ ì„¤ì •

```tsx
const router = createRouter({
  routeTree,
  defaultPreloadStaleTime: 30_000, // 30ì´ˆ ë™ì•ˆ í”„ë¦¬ë¡œë“œ ë°ì´í„° ìœ ì§€
  defaultGcTime: 5 * 60 * 1000, // 5ë¶„ ë™ì•ˆ ìºì‹œ ìœ ì§€
});
```

### ë¼ìš°íŠ¸ë³„ ìºì‹œ ì„¤ì •

```tsx
export const Route = createFileRoute('/posts')({
  loader: async () => {
    const posts = await fetchPosts();
    return { posts };
  },
  staleTime: 60_000, // 1ë¶„ ë™ì•ˆ ë°ì´í„°ê°€ fresh
  gcTime: 5 * 60_000, // 5ë¶„ ë™ì•ˆ ìºì‹œ ìœ ì§€
  component: PostsComponent,
});
```

`TanStack Query`ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ë” ê°•ë ¥í•œ ìºì‹±ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

```tsx
export const Route = createFileRoute('/posts')({
  loader: async ({ context }) => {
    await context.queryClient.ensureQueryData({
      queryKey: ['posts'],
      queryFn: fetchPosts,
      staleTime: 60_000,
    });
  },
  component: PostsComponent,
});

function PostsComponent() {
  const { data: posts } = useQuery({
    queryKey: ['posts'],
    queryFn: fetchPosts,
  });
  // ...
}
```

---

## Protecting Routes

ì¸ì¦ì´ í•„ìš”í•œ ë¼ìš°íŠ¸ë¥¼ ë³´í˜¸í•˜ë ¤ë©´ `beforeLoad`ë¥¼ ì‚¬ìš©í•œë‹¤.

### ë‹¨ì¼ ë¼ìš°íŠ¸ ë³´í˜¸

```tsx
import { createFileRoute, redirect } from '@tanstack/react-router';

export const Route = createFileRoute('/dashboard')({
  beforeLoad: async ({ context, location }) => {
    if (!context.auth.isAuthenticated) {
      throw redirect({
        to: '/login',
        search: {
          redirect: location.href,
        },
      });
    }
  },
  component: DashboardComponent,
});
```

### ë ˆì´ì•„ì›ƒ ë¼ìš°íŠ¸ë¡œ ì—¬ëŸ¬ ë¼ìš°íŠ¸ ë³´í˜¸

Pathless Layoutì„ ì‚¬ìš©í•˜ë©´ ì—¬ëŸ¬ ë¼ìš°íŠ¸ë¥¼ í•œ ë²ˆì— ë³´í˜¸í•  ìˆ˜ ìˆë‹¤.

```
ğŸ“¦routes
 â”£ ğŸ“‚_authenticated
 â”ƒ â”£ ğŸ“œroute.tsx          â†’ ì¸ì¦ ì²´í¬ ë° ë ˆì´ì•„ì›ƒ
 â”ƒ â”£ ğŸ“œdashboard.tsx      â†’ "/dashboard" (ë³´í˜¸ë¨)
 â”ƒ â”£ ğŸ“œprofile.tsx        â†’ "/profile" (ë³´í˜¸ë¨)
 â”ƒ â”— ğŸ“œsettings.tsx       â†’ "/settings" (ë³´í˜¸ë¨)
 â”— ğŸ“œlogin.tsx             â†’ "/login" (ê³µê°œ)
```

```tsx
// routes/_authenticated/route.tsx
import { createFileRoute, Outlet, redirect } from '@tanstack/react-router';

export const Route = createFileRoute('/_authenticated')({
  beforeLoad: async ({ context, location }) => {
    if (!context.auth.isAuthenticated) {
      throw redirect({
        to: '/login',
        search: { redirect: location.href },
      });
    }
  },
  component: () => <Outlet />,
});
```

### ë¡œê·¸ì¸ í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸

```tsx
// routes/login.tsx
import { createFileRoute, useNavigate } from '@tanstack/react-router';

export const Route = createFileRoute('/login')({
  validateSearch: (search) => ({
    redirect: search.redirect as string | undefined,
  }),
  component: LoginComponent,
});

function LoginComponent() {
  const navigate = useNavigate();
  const { redirect: redirectUrl } = Route.useSearch();

  const handleLogin = async (credentials: Credentials) => {
    await login(credentials);
    navigate({ to: redirectUrl || '/dashboard' });
  };

  return <LoginForm onSubmit={handleLogin} />;
}
```

---

## í•µì‹¬ ì •ë¦¬

- **íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…**: `src/routes` í´ë” êµ¬ì¡°ê°€ ê³§ ë¼ìš°íŠ¸ êµ¬ì¡°ë‹¤
- **íƒ€ì… ì•ˆì „ì„±**: `Register` ì¸í„°í˜ì´ìŠ¤ë¡œ ì „ì²´ ì•±ì—ì„œ íƒ€ì… ì•ˆì „í•œ ë„¤ë¹„ê²Œì´ì…˜
- **ë™ì  ê²½ë¡œ**: `$`ë¡œ ì‹œì‘í•˜ëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë™ì  íŒŒë¼ë¯¸í„° ì •ì˜
- **ê²€ìƒ‰ íŒŒë¼ë¯¸í„°**: `validateSearch`ë¡œ íƒ€ì… ì•ˆì „í•œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ì²˜ë¦¬
- **ë°ì´í„° ë¡œë”©**: `loader`ë¡œ ë Œë”ë§ ì „ ë°ì´í„° í˜ì¹­, `useLoaderData`ë¡œ ì ‘ê·¼
- **ì—ëŸ¬ ì²˜ë¦¬**: `errorComponent`, `notFoundComponent`ë¡œ ì—ëŸ¬ UI ì •ì˜
- **ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…**: `autoCodeSplitting`ìœ¼ë¡œ ìë™ ë¶„í• , `.lazy.tsx`ë¡œ ìˆ˜ë™ ë¶„í• 
- **í”„ë¦¬ë¡œë”©**: `preload="intent"`ë¡œ hoverì‹œ ë¯¸ë¦¬ ë¡œë“œ
- **ë¼ìš°íŠ¸ ë³´í˜¸**: `beforeLoad`ì™€ `redirect`ë¡œ ì¸ì¦ ì²˜ë¦¬
- **ì»¨í…ìŠ¤íŠ¸**: `createRootRouteWithContext`ë¡œ ì „ì—­ ë°ì´í„° ê³µìœ 
