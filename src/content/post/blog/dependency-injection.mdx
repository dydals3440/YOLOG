---
title: Reactì—ì„œì˜ ì˜ì¡´ì„± ì£¼ì…(Dependency Injection)
date: 2025-12-07
updatedDate: 2025-12-07
tags:
  [
    React,
    Dependency Injection,
    DI,
    Context API,
    í…ŒìŠ¤íŠ¸,
    ë””ìì¸ íŒ¨í„´,
    í´ë¦° ì•„í‚¤í…ì²˜,
    ì˜ì¡´ì„± ì£¼ì…,
    í´ë¦° ì•„í‚¤í…ì²˜,
  ]
category: DEVELOPMENT
image: '/images/dependency-injection/clean-architecture.webp'
---

# ë¦¬ì•¡íŠ¸ ì˜ì¡´ì„± ì£¼ì…

í˜„ì¬ ì›¹ í”„ë¡ íŠ¸ì—”ë“œ ìƒíƒœê³„ì—ì„œëŠ” ëŒ€ë¶€ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ **React**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê°œë°œë˜ê³  ìˆë‹¤.

í•„ìëŠ” ê°œì¸ì ìœ¼ë¡œ **ì˜ì¡´ì„± ì£¼ì…(Dependency Injection)** íŒ¨í„´ì„ ì„ í˜¸í•˜ì§€ë§Œ, ë¦¬ì•¡íŠ¸ë¥¼ ì²˜ìŒ ì ‘í•˜ëŠ” ê°œë°œìë“¤ ì¤‘ ìƒë‹¹ìˆ˜ëŠ” ì´ ê°œë…ì— ìµìˆ™í•˜ì§€ ì•Šê±°ë‚˜, ì‹¬ì§€ì–´ ë³¸ì¸ì´ ì´ë¯¸ ì˜ì¡´ì„± ì£¼ì…ê³¼ ìœ ì‚¬í•œ íŒ¨í„´ì„ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë©´ì„œë„ ê·¸ê²ƒì´ ë¬´ì—‡ì¸ì§€ ì¸ì§€í•˜ì§€ ëª»í•œ ì±„ ê°œë°œì„ ì§„í–‰í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ë§ì€ ì‚¬ëŒë“¤ì´ `Context API`ë¥¼ ì´ì•¼ê¸°í•  ë•Œ ì´ë¥¼ ë‹¨ìˆœíˆ `props drilling`ì„ í”¼í•˜ê¸° ìœ„í•œ ìˆ˜ë‹¨ ì •ë„ë¡œë§Œ ì´í•´í•œë‹¤.

ë¬¼ë¡  ê¹Šì–´ì§„ ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ë¡œ ì¸í•´ propsê°€ ì—¬ëŸ¬ ë‹¨ê³„ë¡œ ì „ë‹¬ë˜ëŠ” ë¬¸ì œëŠ” **ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°ì™€ ìœ„ê³„ë¥¼ ì ì ˆíˆ ì¡°ì •í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œë„** ëŒ€ë¶€ë¶„ ì™„í™”í•  ìˆ˜ ìˆë‹¤ê³  ìƒê°í•œë‹¤.

í•˜ì§€ë§Œ ì´ ê¸€ì—ì„œëŠ” ê·¸ëŸ° ìˆ˜ì¤€ì„ ì¡°ê¸ˆ ë„˜ì–´, `Context API`ë¥¼ **ì „ì—­ ìƒíƒœ ê´€ë¦¬ ë„êµ¬**ê°€ ì•„ë‹Œ, **ì˜ì¡´ì„± ì£¼ì…(Dependency Injection)ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ ë©”ì»¤ë‹ˆì¦˜**ìœ¼ë¡œ ë°”ë¼ë³´ëŠ” ê´€ì ì„ ì†Œê°œí•˜ê³ ì í•œë‹¤.

í¥ë¯¸ë¡œìš´ ì ì€, ì´ëŸ¬í•œ ì˜ì¡´ì„± ì£¼ì… íŒ¨í„´ì´ **React ìœ„ì£¼ì˜ ì›¹ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìë“¤ë³´ë‹¤ëŠ”**, ì˜¤íˆë ¤ **ì•ˆë“œë¡œì´ë“œ, iOS, ë°±ì—”ë“œ ê°œë°œìë“¤ì—ê²Œ ë” ìµìˆ™í•˜ê³  ê°•ì¡°ë˜ëŠ” íŒ¨í„´**ì´ë¼ëŠ” ê²ƒì´ë‹¤.

ì´ë“¤ ìƒíƒœê³„ì—ì„œëŠ” ì„œë¹„ìŠ¤, ë¦¬í¬ì§€í† ë¦¬, í´ë¼ì´ì–¸íŠ¸ ë“±ì˜ ì˜ì¡´ì„±ì„ ì™¸ë¶€ì—ì„œ ì£¼ì…ë°›ëŠ” êµ¬ì¡°ê°€ ë¹„êµì  ìì—°ìŠ¤ëŸ½ê²Œ ë°›ì•„ë“¤ì—¬ì§€ê³ , ë‹¤ì–‘í•œ DI í”„ë ˆì„ì›Œí¬ë„ í™œë°œíˆ ì‚¬ìš©ëœë‹¤.

ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ë¨¼ì € **ì˜ì¡´ì„± ì£¼ì…ì´ ë¬´ì—‡ì¸ì§€**ë¥¼ ê°„ë‹¨íˆ ì •ë¦¬í•œ ë’¤, ì´ë¥¼ ë¦¬ì•¡íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í™œìš©í–ˆì„ ë•Œ ì–´ë–¤ **ì‹¤ì§ˆì ì¸ ì´ì **ì„ ì–»ì„ ìˆ˜ ìˆëŠ”ì§€ ë‹¨ê³„ì ìœ¼ë¡œ ì‚´í´ë³´ë ¤ê³  í•œë‹¤.

---

## ì˜ì¡´ì„± ì£¼ì…(Dependency Injection)ì´ë€ ë¬´ì—‡ì¸ê°€?

ì•„ì£¼ ê¸°ì´ˆì ì¸ ìˆ˜ì¤€ì—ì„œ `ì˜ì¡´ì„± ì£¼ì…(DI)`ì€ ì½”ë“œ ë‚´ë¶€ì—ì„œ íŠ¹ì • ê°ì²´ë¥¼ ì§ì ‘ ìƒì„±í•˜ê±°ë‚˜ ë°•ì•„ë„£ëŠ”(Hard-coding) ëŒ€ì‹ , ì™¸ë¶€ì—ì„œ ë¶€í’ˆì„ ê°ˆì•„ë¼ìš°ë“¯ ì£¼ì…í•´ì£¼ëŠ” ë””ìì¸ íŒ¨í„´ì´ë‹¤.

ë°±ì—”ë“œì—ì„œ ì´ëŸ¬í•œ íŒ¨í„´ì„ í”í•˜ê²Œ í™œìš©í•œë‹¤ê³  í–ˆìœ¼ë‹ˆ í•œë²ˆ ê²°ì œ ì„œë¹„ìŠ¤ë¥¼ ì˜ˆì‹œë¡œ ë“¤ì–´ ì„¤ëª…í•´ë³´ê² ë‹¤.

### DIë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ ê²½ìš° (ê°•í•œ ê²°í•©)

ë§Œì•½ **ì˜ì¡´ì„± ì£¼ì…**ì„ ëª¨ë¥¸ë‹¤ë©´, ë³´í†µ ì£¼ë¬¸ ì²˜ë¦¬ í•¨ìˆ˜ ì•ˆì— íŠ¹ì • ê²°ì œì‚¬(ì˜ˆ: í† ìŠ¤ í˜ì´ë¨¼ì¸ ) ì½”ë“œë¥¼ ì§ì ‘ ë°•ì•„ë²„ë¦°ë‹¤.

```ts
import { tossPayments } from '@tosspayments/sdk';

async function processOrder(amount: number) {
  console.log('ì£¼ë¬¸ ì²˜ë¦¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.');

  // âŒ í•¨ìˆ˜ ì•ˆì—ì„œ íŠ¹ì • ê²°ì œ ëª¨ë“ˆì„ ì§ì ‘ ì‚¬ìš© (ê°•í•œ ê²°í•©)
  // ì´ ì½”ë“œëŠ” í‰ìƒ í† ìŠ¤ í˜ì´ë¨¼ì¸ ë§Œ ì¨ì•¼ í•œë‹¤.
  // Stripeë¡œ ë°”ê¾¸ë ¤ë©´ ì´ íŒŒì¼ì„ ëœ¯ì–´ê³ ì³ì•¼ í•œë‹¤.
  await tossPayments.pay(amount);
}
```

ì´ ì½”ë“œì˜ ë¬¸ì œì ì€ ìœ ì—°ì„±ì´ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤.

ì§€ê¸ˆ ì½”ë“œë§Œ ë³´ë©´ ë­ê°€ ë¬¸ì œì¸ì§€ë¼ê³  ìƒê°í•  ìˆ˜ ìˆë‹¤. í•´ë‹¹ ë¸”ë¡œê·¸ëŠ” ì •ë§ ê°„ë‹¨í•œ ì˜ˆì‹œë¡œ ì‘ì„±í–ˆê¸°ì— ì‹¤ì œë¡œëŠ” `processOrder` í•¨ìˆ˜ëŠ” ë” ë³µì¡í•  ê²ƒì´ë‹¤.

> "ìš°ë¦¬ëŠ” ì´ì œ í•´ì™¸ë¡œ ê°ˆê±°ì—ìš”, í•´ì™¸ ê³ ê°ì„ ìœ„í•´ Stripeë„ ë¶™ì—¬ì£¼ì„¸ìš”."ë¼ëŠ” ìš”êµ¬ì‚¬í•­ì´ ì˜¨ë‹¤ë©´ `processOrder` í•¨ìˆ˜ë¥¼ ì „ë¶€ ëœ¯ì–´ê³ ì³ì•¼ í•œë‹¤.

**ë˜í•œ í…ŒìŠ¤íŠ¸í•  ë•Œë§ˆë‹¤ ì‹¤ì œ ëˆì´ ê²°ì œ**ë˜ëŠ”, ìˆì–´ì„œëŠ” ì•ˆ ë˜ëŠ” ìƒí™©ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤.

ì‹¤ì œë¡œ ìš°ë¦¬ëŠ” ì´ëŸ¬í•œ ì½”ë“œë¥¼ **ì¬ì‚¬ìš©ì„±ì´ ë–¨ì–´ì§€ê³ , ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì–´ë ¤ìš´ ì½”ë“œ**ë¼ê³  ë¶€ë¥¸ë‹¤.

### DIë¥¼ ì‚¬ìš©í•œ ê²½ìš° (ëŠìŠ¨í•œ ê²°í•©)

`DI(ì˜ì¡´ì„± ì£¼ì…)`ì˜ í•µì‹¬ì€ `processOrder` í•¨ìˆ˜ê°€ "ì–´ë–¤ ê²°ì œì‚¬ë¥¼ ì“°ëŠ”ì§€" êµ¬ì²´ì ìœ¼ë¡œ ì•Œ í•„ìš”ê°€ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤.

ê·¸ì € `ê²°ì œ ê¸°ëŠ¥(Interface)`ì´ ìˆëŠ” ë¶€í’ˆì´ ë“¤ì–´ì˜¨ë‹¤ëŠ” ê²ƒë§Œ ì•Œë©´ ëœë‹¤.

1. **ê·œê²©(Interface) ì •ì˜** : ë¨¼ì € ëª¨ë“  ê²°ì œ ëª¨ë“ˆì´ ì§€ì¼œì•¼ í•  `ê·œê²©(Interface)`ì„ ì •í•œë‹¤.

```ts
// âœ… "ê²°ì œëŠ” ì´ë ‡ê²Œ í•˜ëŠ” ê²ƒì´ë‹¤"ë¼ëŠ” ê·œê²© ì •ì˜
interface PaymentProcessor {
  pay(amount: number): Promise<void>;
}
```

2. **ë¶€í’ˆ(Implementation) ë§Œë“¤ê¸°** : ê·œê²©ì— ë§ì¶°ì„œ ì‹¤ì œ ë¶€í’ˆë“¤ì„ ë§Œë“ ë‹¤.

```ts
// ë¶€í’ˆ A: í† ìŠ¤ í˜ì´ë¨¼ì¸  ê²°ì œ (í•œêµ­)
const tossProcessor: PaymentProcessor = {
  pay: async (amount) => {
    console.log(`[TossPayments] ${amount}ì› ê²°ì œ ì™„ë£Œ`);
    // ì‹¤ì œ í† ìŠ¤ í˜ì´ë¨¼ì¸  SDK í˜¸ì¶œ ë¡œì§...
  },
};

// ë¶€í’ˆ B: Stripe ê²°ì œ (í•´ì™¸)
const stripeProcessor: PaymentProcessor = {
  pay: async (amount) => {
    console.log(`[Stripe] $${amount} ê²°ì œ ì™„ë£Œ`);
    // ì‹¤ì œ Stripe SDK í˜¸ì¶œ ë¡œì§...
  },
};

// ë¶€í’ˆ C: í…ŒìŠ¤íŠ¸ìš© ê°€ì§œ ê²°ì œ (ëˆ ì•ˆë‚˜ê°)
const mockProcessor: PaymentProcessor = {
  pay: async (amount) => {
    console.log(`[TEST] ${amount}ì› ê²°ì œ ì™„ë£Œ (ì‹¤ì œ ì²­êµ¬ X)`);
  },
};
```

3. **ì¡°ë¦½í•´ì„œ ì‚¬ìš©í•˜ê¸° (Injection)** : ì´ì œ `processOrder` í•¨ìˆ˜ëŠ” êµ¬ì²´ì ì¸ ê²°ì œì‚¬ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•Šê³ , ì¸ìë¡œ ì£¼ì…ë°›ëŠ”ë‹¤.

```ts
// â­ï¸ í•µì‹¬: í•¨ìˆ˜ê°€ PaymentProcessorë¥¼ ì¸ìë¡œ ì£¼ì…ë°›ëŠ”ë‹¤
async function processOrder(
  paymentProcessor: PaymentProcessor,
  amount: number
) {
  // ë“¤ì–´ì˜¨ ë¶€í’ˆì´ ë­ë“  ê°„ì— .pay()ë§Œ í˜¸ì¶œí•˜ë©´ ëœë‹¤.
  await paymentProcessor.pay(amount);
}

// --- ì‹¤ì œ ì‚¬ìš© ì‹œì  (ì¡°ë¦½) ---

// ìƒí™© 1: í•œêµ­ ì„œë¹„ìŠ¤ ëŸ°ì¹­í•  ë• í† ìŠ¤ í˜ì´ë¨¼ì¸  ì‚¬ìš©
processOrder(tossProcessor, 10000); // "[TossPayments] 10000ì› ê²°ì œ ì™„ë£Œ"

// ìƒí™© 2: í•´ì™¸ ì„œë¹„ìŠ¤ ëŸ°ì¹­í•  ë• Stripe ì‚¬ìš©
processOrder(stripeProcessor, 100); // "[Stripe] $100 ê²°ì œ ì™„ë£Œ"

// ìƒí™© 3: ê°œë°œìê°€ ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸í•  ë• ê°€ì§œ ë¶€í’ˆ ì‚¬ìš©
processOrder(mockProcessor, 5000); // "[TEST] ê°€ì§œ ê²°ì œ ì„±ê³µ (ì‹¤ì œ ì²­êµ¬ X)"
```

ë³´ë‹¤ì‹œí”¼ `processOrder` í•¨ìˆ˜ ì½”ë“œëŠ” ë‹¨ í•œ ì¤„ë„ ìˆ˜ì •í•˜ì§€ ì•Šì•˜ëŠ”ë°, ì™¸ë¶€ì—ì„œ ë¬´ì—‡ì„ ë„£ì–´ì£¼ëŠëƒ(ì£¼ì…í•˜ëŠëƒ)ì— ë”°ë¼ ë™ì‘ì´ ì™„ì „íˆ ë‹¬ë¼ì§„ë‹¤.

ì´ê²ƒì´ ë°”ë¡œ `DI(ì˜ì¡´ì„± ì£¼ì…)`ì´ ì£¼ëŠ” ê°•ë ¥í•œ êµì²´ì˜ ììœ ë‹¤.

### í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ì´ ì‰¬ì›Œì§„ë‹¤

ì´ì œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ë³´ë©´ `DI(ì˜ì¡´ì„± ì£¼ì…)`ì˜ ì¥ì ì´ ë” ëª…í™•í•´ì§„ë‹¤.

ì‹¤ì œ ê²°ì œ ëª¨ë“ˆ ëŒ€ì‹  ê°€ì§œ ëª¨ë“ˆì„ ì£¼ì…í•´ì„œ í•¨ìˆ˜ì˜ ë™ì‘ì„ ê²€ì¦í•  ìˆ˜ ìˆë‹¤.

```ts
describe('processOrder', () => {
  it('ê²°ì œ ì²˜ë¦¬ê°€ ì •ìƒì ìœ¼ë¡œ í˜¸ì¶œë˜ì–´ì•¼ í•œë‹¤', async () => {
    // ê°€ì§œ ê²°ì œ ëª¨ë“ˆ ìƒì„± (ëª¨í‚¹)
    const mockProcessor: PaymentProcessor = {
      pay: vi.fn(),
    };

    await processOrder(mockProcessor, 5000);

    // pay í•¨ìˆ˜ê°€ 5000ì›ìœ¼ë¡œ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ ê²€ì¦
    expect(mockProcessor.pay).toHaveBeenCalledWith(5000);
    expect(mockProcessor.pay).toHaveBeenCalledTimes(1);
  });
});
```

í…ŒìŠ¤íŠ¸í•  ë•Œ ì‹¤ì œ í† ìŠ¤ í˜ì´ë¨¼ì¸ ë‚˜ Stripe APIë¥¼ í˜¸ì¶œí•  í•„ìš”ê°€ ì—†ë‹¤. `vi.fn()`ìœ¼ë¡œ ê°€ì§œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì£¼ì…í•˜ë©´, ì‹¤ì œ ê²°ì œ ì—†ì´ë„ `processOrder` í•¨ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ë™ì‘í•˜ëŠ”ì§€ ê²€ì¦í•  ìˆ˜ ìˆë‹¤.

> ë¬¼ë¡  ëŒ€ë¶€ë¶„ì˜ ê²°ì œ ëª¨ë“ˆì€ í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ê°€ìƒ í™˜ê²½ì„ ì œê³µí•˜ê³  ìˆë‹¤.

---

## Reactì—ì„œì˜ ì˜ì¡´ì„± ì£¼ì…ì€ ì–´ë–»ê²Œ ì‘ë™í• ê¹Œ?

Reactì—ì„œëŠ” `Context API`ë¥¼ í™œìš©í•´ `ì œì–´ì˜ ì—­ì „(IoC)`ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. prop drilling ì—†ì´ ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ì–´ë””ì„œë“  ì˜ì¡´ì„±ì„ ì£¼ì…ë°›ì„ ìˆ˜ ìˆì–´ ê¹”ë”í•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì¢‹ì€ ì½”ë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

### ê°•í•œ ê²°í•©ì˜ ë¬¸ì œì 

ì˜í™” ìƒì„¸ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ë¥¼ ì˜ˆì‹œë¡œ ë“¤ì–´ë³´ì.

```ts
// âŒ API í´ë¼ì´ì–¸íŠ¸ë¥¼ ì§ì ‘ import - ê°•í•œ ê²°í•©
import { movieApi } from './api/movie';

function MovieDetailPage() {
  const { id } = useParams<{ id: number }>();

  const { data: movie } = useQuery({
    queryKey: ['movie', id],
    queryFn: () => movieApi.getDetail(id),
  });

  return (
    <div>
      <h1>{movie?.title}</h1>
      <p>{movie?.overview}</p>
    </div>
  );
}
```

ì´ ì½”ë“œëŠ” `movieApi`ì™€ ê°•í•˜ê²Œ ê²°í•©ë˜ì–´ ìˆë‹¤. ì™œ ë¬¸ì œì¼ê¹Œ?

#### ë¬¸ì œ 1: í…ŒìŠ¤íŠ¸ê°€ ë„¤íŠ¸ì›Œí¬ì— ì˜ì¡´í•œë‹¤

```ts
test('ì˜í™” ì œëª©ì„ ë³´ì—¬ì¤€ë‹¤', async () => {
  render(<MovieDetailPage />);
  // ğŸ˜
  expect(screen.getByText('ì•„ì´ì–¸ë§¨')).toBeInTheDocument();
});
```

ì´ í…ŒìŠ¤íŠ¸ëŠ” ì‹¤ì œ APIë¥¼ í˜¸ì¶œí•œë‹¤. ì„œë²„ì˜ ì˜í™” ì •ë³´ê°€ ë°”ë€Œê±°ë‚˜ ì‚­ì œë˜ë©´? ë„¤íŠ¸ì›Œí¬ê°€ ëŠê¸°ë©´? í…ŒìŠ¤íŠ¸ëŠ” ì‹¤íŒ¨í•œë‹¤.

#### ë¬¸ì œ 2: ì˜ˆì™¸ ìƒí™©ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ì—†ë‹¤

```ts
test('ì„œë²„ ì—ëŸ¬ ì‹œ ì—ëŸ¬ ë¬¸êµ¬ë¥¼ ë³´ì—¬ì¤€ë‹¤', () => {
  render(<MovieDetailPage />);
  // ì˜ì›íˆ ì‹¤íŒ¨
  expect(screen.getByText('ì ê²€ ì¤‘ì…ë‹ˆë‹¤')).toBeInTheDocument();
});
```

ì‹¤ì œ ì„œë²„ê°€ ì •ìƒ(200 OK)ì´ë©´ ì—ëŸ¬ í™”ë©´ì„ í…ŒìŠ¤íŠ¸í•  ë°©ë²•ì´ ì—†ë‹¤.

#### ë¬¸ì œ 3: ëª¨ë“ˆ ëª¨í‚¹ì€ ì§€ì €ë¶„í•˜ë‹¤

ì–µì§€ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•  ìˆ˜ëŠ” ìˆë‹¤.

```ts
import * as movieApiModule from './api/movie';

vi.mock('./api/movie');

test('ì˜í™” ì œëª©ì„ ë³´ì—¬ì¤€ë‹¤', async () => {
  vi.mocked(movieApiModule.movieApi.getDetail).mockResolvedValue({
    title: 'í…ŒìŠ¤íŠ¸ìš© ì˜í™”',
  });

  render(<MovieDetailPage />);

  vi.clearAllMocks();
});
```

í•˜ì§€ë§Œ ì´ ë°©ì‹ì€ ë¬¸ì œê°€ ë§ë‹¤:

- **ê²½ë¡œ ì˜ì¡´ì„±**: `./api/movie.ts` íŒŒì¼ì„ ì˜®ê¸°ë©´ ëª¨ë“  í…ŒìŠ¤íŠ¸ì˜ `vi.mock()` ê²½ë¡œë¥¼ ìˆ˜ì •í•´ì•¼ í•œë‹¤
- **ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸**: `vi.mock`, `mockResolvedValue`, `clearAllMocks` ê°™ì€ ì„¤ì • ì½”ë“œê°€ í…ŒìŠ¤íŠ¸ ë¡œì§ë³´ë‹¤ ê¸¸ì–´ì§„ë‹¤

### í•´ê²°ì±…: ì˜ì¡´ì„± ì£¼ì…

í…ŒìŠ¤íŠ¸í•  ë•ŒëŠ” ì‹¤ì œ API ì—†ì´ë„ ë§ˆì¹˜ í˜¸ì¶œí•œ ê²ƒì²˜ëŸ¼ ë™ì‘í•˜ëŠ” í™˜ê²½ì„ ë§Œë“¤ê³  ì‹¶ë‹¤.

`ì˜ì¡´ì„± ì£¼ì…(DI)`ì„ ì‚¬ìš©í•˜ë©´ ìŠ¤í…(Stub) API í´ë¼ì´ì–¸íŠ¸ë¥¼ ì£¼ì…í•´ì„œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì—†ì´ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆë‹¤.

---

## Reactì—ì„œ ì œì–´ì˜ ì—­ì „(Inversion of Control)ì„ ë„ì…í•˜ëŠ” ë‹¨ê³„ë³„ ë°©ë²•

ë‹¤ìŒ ë‹¨ê³„ë¥¼ ê±°ì³ ì§„í–‰í•œë‹¤:

1. **ì¸í„°í˜ì´ìŠ¤ ì •ì˜** - API í´ë¼ì´ì–¸íŠ¸ì˜ í˜•íƒœ(shape) ì •ì˜
2. **ì‹¤ì œ êµ¬í˜„ì²´ ìƒì„±** - ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ ì‘ì„±
3. **Context ë° Provider ìƒì„±** - ì˜ì¡´ì„±ì„ ë‹´ì„ ì»¨í…Œì´ë„ˆ
4. **ìµœìƒìœ„ì—ì„œ êµ¬í˜„ì²´ ì£¼ì…** - Composition Root íŒ¨í„´
5. **ì»´í¬ë„ŒíŠ¸ì—ì„œ ì˜ì¡´ì„± ì‚¬ìš©** - useContext í—¬í¼ í›… í™œìš©

> í˜„ì¬ ì˜ˆì‹œëŠ” ë³µì¡í•œ ìš”êµ¬ì‚¬í•­ì´ ì—†ë‹¤ê³  ê°€ì •í•˜ì—¬, Repository/Service ê°™ì€ ë³„ë„ ë ˆì´ì–´ ì—†ì´ ë‹¨ì¼ ì¸í„°í˜ì´ìŠ¤ë¡œ ì‘ì„±í•˜ì˜€ë‹¤.

---

### 1ë‹¨ê³„: ì¸í„°í˜ì´ìŠ¤ ì •ì˜

ë¨¼ì € ì£¼ì…í•  ì˜ì¡´ì„±ì˜ í˜•íƒœ(shape)ë¥¼ ì •ì˜í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“ ë‹¤.

```ts
// types.ts
interface MovieClientService {
  getDetail(id: number): Promise<MovieDetail>;
}
```

---

### 2ë‹¨ê³„: ì‹¤ì œ êµ¬í˜„ì²´ ìƒì„±

ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ì‹¤ì œ í´ë˜ìŠ¤ë¥¼ ë§Œë“ ë‹¤.

```ts
// MovieClient.ts
class MovieClient implements MovieClientService {
  async getDetail(id: number): Promise<MovieDetail> {
    const response = await fetch(`/api/movies/${id}`);
    return response.json();
  }
}
```

---

### 3ë‹¨ê³„: Context ë° Provider ìƒì„±

ì˜ì¡´ì„±ì„ ë‹´ì„ Contextì™€ Providerë¥¼ ë§Œë“ ë‹¤.

```ts
const MovieClientContext = createContext<MovieClientService | null>(null);

function useMovieClient(): MovieClientService {
  const context = use(MovieClientContext);
  if (!context) {
    throw new Error('MovieClientProviderê°€ í•„ìš”í•˜ë‹¤');
  }
  return context;
}
```

ProviderëŠ” **ì£¼ì…ë§Œ ë‹´ë‹¹**í•˜ê³ , ê¸°ë³¸ê°’ì„ ì§ì ‘ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ Providerê°€ íŠ¹ì • êµ¬í˜„ì²´ì— ì˜ì¡´í•˜ì§€ ì•Šì•„ ì™„ì „í•œ DIê°€ ê°€ëŠ¥í•˜ë‹¤.

```ts
function MovieClientProvider({
  client,
  children,
}: {
  client: MovieClientService;
  children: ReactNode;
}) {
  return (
    <MovieClientContext.Provider value={client}>
      {children}
    </MovieClientContext.Provider>
  );
}
```

---

### 4ë‹¨ê³„: ìµœìƒìœ„ì—ì„œ êµ¬í˜„ì²´ ì£¼ì… (Composition Root)

ë˜í¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ êµ¬í˜„ì²´ ìƒì„±ê³¼ Providerë¥¼ ìº¡ìŠí™”í•œë‹¤. ì´ íŒ¨í„´ì„ `Composition Root`ë¼ê³  ë¶€ë¥¸ë‹¤.

```ts
// ApiClientProvider.tsx
function ApiClientProvider({ children }: PropsWithChildren) {
  const movieClient = useState(() => {
    return new MovieClient();
  });

  return (
    <MovieClientProvider client={movieClient}>{children}</MovieClientProvider>
  );
}

// App.tsx
function App() {
  return (
    <ApiClientProvider>
      <QueryClientProvider client={queryClient}>
        <Router />
      </QueryClientProvider>
    </ApiClientProvider>
  );
}
```

`useState`ì˜ ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ í•œ ë²ˆë§Œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.

App.tsxëŠ” ë˜í¼ë§Œ ì‚¬ìš©í•˜ë©´ ë˜ë¯€ë¡œ ë” ê¹”ë”í•´ì§„ë‹¤.

---

### 5ë‹¨ê³„: ì»´í¬ë„ŒíŠ¸ì—ì„œ ì£¼ì…ëœ ì˜ì¡´ì„± ì‚¬ìš©

ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” `useMovieClient` í›…ìœ¼ë¡œ ì£¼ì…ëœ ì˜ì¡´ì„±ì„ ì‚¬ìš©í•œë‹¤.

```ts
function MovieDetailPage() {
  const { id } = useParams<{ id: number }>();
  const movieClient = useMovieClient(); // Contextì—ì„œ DI ë°›ê¸°

  const { data: movie } = useQuery({
    queryKey: ['movie', id],
    queryFn: () => movieClient.getDetail(id),
  });

  return (
    <div>
      <h1>{movie?.title}</h1>
      <p>{movie?.overview}</p>
    </div>
  );
}
```

ì»´í¬ë„ŒíŠ¸ëŠ” `MovieClientService` ì¸í„°í˜ì´ìŠ¤ë§Œ ì•Œê³ , ì‹¤ì œë¡œ ì–´ë–¤ êµ¬í˜„ì²´ê°€ ì£¼ì…ë˜ì—ˆëŠ”ì§€ëŠ” ëª¨ë¥¸ë‹¤.

ì´ê²ƒì´ ë°”ë¡œ **ëŠìŠ¨í•œ ê²°í•©**ì´ë‹¤.

---

## ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ ë°©ë²•

Providerì— Mock ê°ì²´ë¥¼ ì£¼ì…í•´ì„œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì—†ì´ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆë‹¤.

```ts
describe('MovieDetailPage', () => {
  it('ì˜í™” ìƒì„¸ ì •ë³´ë¥¼ ë Œë”ë§í•œë‹¤', async () => {
    // Mock í´ë¼ì´ì–¸íŠ¸ ìƒì„±
    const mockClient = {
      getDetail: vi.fn().mockResolvedValue({
        title: 'ì¸ì…‰ì…˜',
        overview: 'ê¿ˆ ì†ì˜ ê¿ˆ',
      }),
    };

    // ì‹¤ì œ ì•±ê³¼ ë™ì¼í•˜ê²Œ ì»¤ìŠ¤í…€ Provider ì‚¬ìš©
    render(
      <MovieClientProvider client={mockClient}>
        <QueryClientProvider
          client={
            new QueryClient({
              defaultOptions: {
                queries: { retry: false },
              },
            })
          }
        >
          <MovieDetailPage />
        </QueryClientProvider>
      </MovieClientProvider>
    );

    // ê²€ì¦
    await waitFor(() => {
      expect(screen.getByText('ì¸ì…‰ì…˜')).toBeInTheDocument();
    });
  });
});
```

ì´ë ‡ê²Œ **"ì™¸ë¶€ ì˜ì¡´ì„±"ì„ ì œê±°í•¨ì„ í†µí•´** í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ì‹ ë¢°ë„ë¥¼ ìƒìŠ¹ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
ì´ ë§ì€, ë¦¬íŒ©í† ë§ì˜ ë‚´êµ¬ì„±ì´ ë†’ì•„ì§„ë‹¤ ë¼ëŠ” ë§ê³¼ ì¼ë§¥ìƒí†µí•˜ë‹¤.

ë˜í•œ ì´ëŸ° êµ¬ì¡°ë¥¼ ë„ì…í•˜ëŠ” ê³¼ì •ì—ì„œ, ìš°ë¦¬ëŠ” ì˜ë„ì¹˜ ì•Šê²Œ `ë‹¨ì¼ ì±…ì„ ì›ì¹™(SRP)`ì„ ì§€í‚¤ê²Œ ë˜ê³ , ê´€ì‹¬ì‚¬ ë¶„ë¦¬(Separation of Concerns) ì—­ì‹œ ìì—°ìŠ¤ëŸ½ê²Œ ë”°ë¼ì˜¤ê²Œ ëœë‹¤.

ì–´ë–¤ ëª¨ë“ˆì€ **"ë¬´ì—‡ì„ í• ì§€"**ì—ë§Œ ì§‘ì¤‘í•˜ê³ , ì–´ë–¤ ëª¨ë“ˆì€ **"ì–´ë–»ê²Œ í• ì§€"**ì—ë§Œ ì§‘ì¤‘í•˜ê²Œ ë˜ë©´ì„œ,
ê°ìì˜ ì±…ì„ì´ ë¶„ëª…í•œ, ì½ê¸° ì‰½ê³  ë³€ê²½ì— ê°•í•œ ì½”ë“œë¡œ ì¡°ê¸ˆì”© ë‹¤ê°€ê°€ê²Œ ëœë‹¤.

> "ë¦¬íŒ©í† ë§"ì€ ê²°êµ­ ê¸°ëŠ¥ ë³€í™”ì—†ì´ í…ŒìŠ¤íŠ¸ ì½”ë“œ ê²°ê³¼ê°€ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì´ë‹¤.

---

## ë¬´ì—‡ì„ ì™¸ë¶€ ì˜ì¡´ì„±ìœ¼ë¡œ ë´ì•¼ í• ê¹Œ?

![Uncle Bobì˜ í´ë¦° ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨](/images/react-clean-architecture/clean-architecture.webp)

**ì™¸ë¶€**ì˜ ê²½ê³„ë¥¼ ì–´ë””ì— ë‘˜ì§€ê°€ í•µì‹¬ì´ë‹¤.

í´ë¦° ì•„í‚¤í…ì²˜ë¥¼ ì—„ê²©íˆ ë”°ë¥´ë©´ Reactì¡°ì°¨ `Frameworks & Drivers` ì˜ì—­ì´ë‹¤. í•˜ì§€ë§Œ ëª¨ë“  ê²ƒì„ ì¶”ìƒí™”í•˜ë©´ ì„œë¹„ìŠ¤ëŠ” ì™„ì„±í•˜ì§€ ëª»í•˜ê³  ì¸í„°í˜ì´ìŠ¤ë§Œ ì •ì˜í•˜ë‹¤ ëë‚œë‹¤.

DIì˜ ëª©ì ì€ ê°œë°œì„ **ì•ˆì „í•˜ê³  ë¹ ë¥´ê²Œ** ë§Œë“œëŠ” ê²ƒì´ë‹¤. ì¶”ìƒí™”ê°€ ì˜¤íˆë ¤ ìƒì‚°ì„±ì„ ë–¨ì–´ëœ¨ë¦°ë‹¤ë©´ ì˜ë¯¸ê°€ ì—†ë‹¤.

ì´ëŸ¬í•œ ì˜ì¡´ì„± ì£¼ì… êµ¬ì¡°ì— ëŒ€í•œ ë§ì€ ê¸€ë“¤ì´ ìˆë‹¤.
ì‹¤ìš©ì ìœ¼ë¡œ **ë°”ê¹¥ ì˜ì—­**ì— ë‘ëŠ” ê²ƒì— ëŒ€í•œ ê²ƒë“¤ì€ ë³´í†µ ì•„ë˜ì™€ ê°™ë‹¤.

- **Network** - API í†µì‹ 
- **Analytics** - ì‚¬ìš©ì í–‰ë™ ì¶”ì , ë¡œê¹…
- **Storage** - localStorage, sessionStorage, ì¿ í‚¤
- **Bridge** - ë‹¤ë¥¸ í”„ë ˆì„ì›Œí¬ì™€ì˜ í†µì‹  (ì›¹ë·° ë“±)
- **Runtime** - User Agent, Browser History

---

## ì˜ì¡´ì„± ì£¼ì…ì— ëŒ€í•œ ê³ ë¯¼

ì˜ì¡´ì„± ì£¼ì…ì´ ë§ŒëŠ¥ì€ ì•„ë‹ˆë‹¤. ì‹¤ì œë¡œ ì ìš©í•˜ë©´ì„œ ë§ˆì£¼í•˜ëŠ” ì–´ë ¤ì›€ì´ ìˆë‹¤.

### ê²½ê³„ ì‹ë³„ì˜ ì–´ë ¤ì›€

ë¬´ì—‡ì„ ì™¸ë¶€ ì˜ì¡´ì„±ìœ¼ë¡œ ë³¼ ê²ƒì¸ì§€ ëª…í™•í•œ ê¸°ì¤€ì´ í•„ìš”í•˜ë‹¤. ê¸°ì¡´ ì½”ë“œë² ì´ìŠ¤ê°€ í¬ë‹¤ë©´ ë¦¬íŒ©í† ë§ ë¹„ìš©ë„ ë§Œë§Œì¹˜ ì•Šë‹¤. (ê¸°ì¡´ì— êµ¬ì¡°ë¥¼ ì˜ ì¡ì„ê»„ í›„íšŒí•œë‹¤)

### DI Containerì˜ ë¶€ì¬

Spring ê°™ì€ ë°±ì—”ë“œ í”„ë ˆì„ì›Œí¬ì™€ ë‹¬ë¦¬, í”„ë¡ íŠ¸ì—”ë“œì—ëŠ” ëŒ€ì¤‘ì ì¸ DI Containerê°€ ì—†ë‹¤. `tsyringe`, `inversify`, `Awilix` ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆì§€ë§Œ, ê°ê° ì‚¬ìš©ì„± ëŒ€ë¹„ ë²ˆë“¤ í¬ê¸° ì¸¡ë©´ì´ë‚˜, ì‹¤ì œ ê¸°ëŠ¥ë©´ì—ì„œ ì•„ì‰¬ìš´ ì ì´ ìˆë‹¤. ê²°êµ­ `React Context API`ë¥¼ í™œìš©í•œ ìˆ˜ë™ ì£¼ì…ì´ í˜„ì‹¤ì ì¸ ì„ íƒì´ë¼ê³  ëŠë¼ê¸°ëŠ” í•˜ì§€ë§Œ, ì•„ì§ë„ ê³ ë¯¼ ì¤‘ì´ë‹¤.

### ì„œë²„/í´ë¼ì´ì–¸íŠ¸ í™˜ê²½ ë¶„ë¦¬

Next.js ê°™ì€ í”„ë ˆì„ì›Œí¬ì—ì„œëŠ” ì„œë²„ ì»´í¬ë„ŒíŠ¸ì™€ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬ë¶„í•´ì•¼ í•œë‹¤. ContextëŠ” í´ë¼ì´ì–¸íŠ¸ ì „ìš©ì´ë¯€ë¡œ, ì„œë²„ì—ì„œ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ë ¤ë©´ ë³„ë„ì˜ ì „ëµì´ í•„ìš”í•˜ë‹¤.

---

## ë§ˆë¬´ë¦¬

ì„œë¹„ìŠ¤ì˜ ë³€ê²½ì´ ë§ì•„ì§ˆìˆ˜ë¡ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ì¤‘ìš”ì„±ì€ ì ì  ë” ì»¤ì§€ê³ , í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì˜ ì‘ì„±í•˜ëŠ” ê²ƒì€ ì„œë¹„ìŠ¤ì˜ ì•ˆì •ì„±ì„ ë†’ì´ëŠ” ì¤‘ìš”í•œ ìš”ì†Œê°€ ëœë‹¤.

ì‹¤ì œë¡œ ìµœê·¼ì— ë„ˆë¬´ë‚˜ ì„œë¹„ìŠ¤ì˜ ê¸°íšì˜ ë³€ê²½ì´ ë§ì•„ì„œ, ì–´ë–»ê²Œ í•˜ë©´ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì˜ ì‘ì„±í•  ìˆ˜ ìˆì„ê¹Œ? ë¼ëŠ” ê³ ë¯¼ì„ ì •ë§ ë§ì´í•˜ë©´ì„œ ê²°êµ­ì—ëŠ” ì§€ê¸ˆ ìš°ë¦¬ ìƒí™©ì— ë§ëŠ” ì ì ˆí•œ ë¦¬ì•¡íŠ¸ ì•„í‚¤í…ì²˜ì— ëŒ€í•œ ê³ ë¯¼ì„ ë§ì´ í•˜ê²Œ ë˜ì—ˆë‹¤.

ì´ëŸ¬í•œ ê³ ë¯¼ì— ì •ë§ ì¢‹ì€ ê¸€ë“¤ì´ ë§ì´ ìˆì—ˆê³ , ì´ë¥¼ í†µí•´ ê·¸ë˜ë„ ê³ ë¯¼í–ˆë˜ ì ë“¤ì´ í•˜ë‚˜í•˜ë‚˜ì”© í•´ê²°ë˜ê³  ê°œì¸ì˜ ì„¤ê³„ì— ëŒ€í•œ ì˜ë¬¸ì¦ì´ í•˜ë‚˜ì”© ì‚¬ë¼ì§€ê³  ìˆëŠ” ê²ƒ ê°™ë‹¤.

> ë¬¼ë¡  ì•„ì§ë„ í’€ë¦¬ì§€ ëª»í•œ ê¶ê¸ˆì¦ì€ ë„ˆë¬´ ë§ë‹¤.

ì¡°ê¸ˆì´ë‚˜ë§ˆ, ë‚˜ì™€ ê°™ì€ ê³ ë¯¼ì„ í•˜ê³  ìˆëŠ” ì‚¬ëŒë“¤ì—ê²Œë„ ì´ ê¸€ì´ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ê³  ì´ëŸ¬í•œ ë¬¸ì œë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í•´ê²°í•˜ì‹  ë¶„ë“¤ì´ ìˆê±°ë‚˜ ê°™ì€ ê³ ë¯¼ì„ í•˜ê³  ê³„ì‹œëŠ” ë¶„ë“¤ì´ ìˆë‹¤ë©´ ëŒ“ê¸€ì— ê³µìœ í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.

---

### ì°¸ê³  ìë£Œ

- [ë‹¬ë¦¬ëŠ” ê¸°ì°¨ì˜ ë°”í€´ êµì²´í•˜ê¸° 2. Restructuring - í•œì¬ì—½ë‹˜](https://toss.tech/article/restructuring)
- [Dependency Injection in React](https://codedrivendevelopment.com/posts/dependency-injection-in-react)
