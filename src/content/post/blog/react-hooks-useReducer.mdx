---
title: useReducerë¡œ ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ ê¹”ë”í•˜ê²Œ ì •ë¦¬í•˜ê¸°
date: 2025-12-24
updatedDate: 2025-12-24
tags: [ë¦¬ì•¡íŠ¸, React, useReducer, Hooks, ìƒíƒœê´€ë¦¬, State, Reducer]
category: DEVELOPMENT
image: "/images/react-hooks-useReducer/thumbnail.webp"
---

# useReducerë¡œ ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ ê¹”ë”í•˜ê²Œ ì •ë¦¬í•˜ê¸°

í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìì—ê²Œ ìˆì–´ì„œ **ìƒíƒœ ê´€ë¦¬**ëŠ” í•„ìˆ˜ì ì´ë‹¤. ì„œë¹„ìŠ¤ì˜ ê·œëª¨ê°€ ì»¤ì§€ê³  ê¸°ëŠ¥ì´ ê³ ë„í™”ë ìˆ˜ë¡, ì´ ìƒíƒœë“¤ì„ ì–´ë–»ê²Œ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠëƒê°€ ì½”ë“œì˜ í’ˆì§ˆì„ ê²°ì •ì§“ê¸° ë•Œë¬¸ì´ë‹¤.

ë¦¬ì•¡íŠ¸ì—ì„œ ìƒíƒœë¥¼ ë‹¤ë£¬ë‹¤ê³  í•˜ë©´, ìš°ë¦¬ ëª¨ë‘ ìì—°ìŠ¤ëŸ½ê²Œ `useState`ë¥¼ ê°€ì¥ ë¨¼ì € ë– ì˜¬ë¦°ë‹¤. ê°€ì¥ ì§ê´€ì ì´ê³  ì‚¬ìš©í•˜ê¸° ì‰½ê¸° ë•Œë¬¸ì´ë‹¤. ì‚¬ì‹¤ ê¸°ìˆ ì ì¸ ê´€ì ì—ì„œ ë³¸ë‹¤ë©´, `useReducer`ë¡œ í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ì‘ì—…ì€ `useState`ë¡œë„ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤.

ê·¸ë ‡ë‹¤ë©´ ì—¬ê¸°ì„œ ê·¼ë³¸ì ì¸ ì˜ë¬¸ì´ ìƒê¸´ë‹¤. **"êµ³ì´ ë” ë³µì¡í•´ ë³´ì´ëŠ” `useReducer`ë¥¼ ì‚¬ìš©í•´ì•¼ í•  ì´ìœ ê°€ ìˆì„ê¹Œ?"**

React íŒ€ì´ ì´ í›…ì„ ë§Œë“  ì´ìœ ëŠ” ëª…í™•í•˜ë‹¤. ë°”ë¡œ "ìƒíƒœ ì—…ë°ì´íŠ¸ ë¡œì§ì˜ ë³µì¡ì„±"ì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œë‹¤. ì‹¤ë¬´ì—ì„œ ê°œë°œì„ í•˜ë‹¤ ë³´ë©´, ë‹¨ìˆœíˆ ê°’ í•˜ë‚˜ë¥¼ ë°”ê¾¸ëŠ” ê²ƒì„ ë„˜ì–´ **í•˜ë‚˜ì˜ ì•¡ì…˜ì´ ì—¬ëŸ¬ ìƒíƒœë¥¼ ë™ì‹œì— ë³€ê²½í•˜ê±°ë‚˜, ì´ì „ ìƒíƒœì— ì˜ì¡´í•˜ì—¬ ë³µì¡í•œ ë¡œì§ì„ ìˆ˜í–‰**í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•œë‹¤.

ì´ë•Œ `useState`ë§Œ ê³ ì§‘í•œë‹¤ë©´ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì–´ì§€ëŸ½ê²Œ í©ì–´ì§€ê²Œ ëœë‹¤. ë°”ë¡œ ì´ ì§€ì ì´ ìš°ë¦¬ê°€ `useReducer`ë¥¼ ê³ ë¯¼í•´ì•¼ í•  íƒ€ì´ë°ì´ë‹¤.

í•´ë‹¹ ë¸”ë¡œê·¸ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ [useReducer ì˜ìƒ ê°•ì˜](https://youtu.be/qTf24zB1g30)ë¡œ ê°„ë‹¨í•˜ê²Œ ì•„ë˜ì˜ ë‚´ìš©ì„ ì„¤ëª…í–ˆìœ¼ë‹ˆ ì˜ìƒì„ ì„ í˜¸í•˜ëŠ” ë¶„ë“¤ì€ ì°¸ê³ í•˜ë©´ ì¢‹ê² ë‹¤.

---

## ì‹œë‚˜ë¦¬ì˜¤: íœ´ëŒ€í° ì¸ì¦ íšŒì›ê°€ì… í¼

ì§ì ‘ `useState`ì™€ `useReducer`ë¡œ ì•„ë˜ì˜ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ê°ê° êµ¬í˜„í•´ë³´ë©° ë¹„êµí•´ë³´ì.

1. íœ´ëŒ€í° ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ê³  'ì¸ì¦ë²ˆí˜¸ ë°›ê¸°'ë¥¼ ëˆ„ë¥¸ë‹¤.
2. ì¸ì¦ë²ˆí˜¸ ì…ë ¥ì°½ì´ ëœ¬ë‹¤. ì´ë•Œ 7ë¶„(420ì´ˆ) íƒ€ì´ë¨¸ê°€ ëˆë‹¤.
3. ì œì•½ ì‚¬í•­: íƒ€ì´ë¨¸ê°€ 0ì´ ë˜ê¸° ì „ê¹Œì§€ëŠ” 'ì¬ì „ì†¡' ë²„íŠ¼ì´ ë¹„í™œì„±í™”ëœë‹¤.
4. ì¸ì¦ì´ ì™„ë£Œë˜ë©´ íšŒì›ê°€ì… í¼(ì•„ì´ë””/ë¹„ë²ˆ ì…ë ¥)ìœ¼ë¡œ ë„˜ì–´ê°„ë‹¤.

ì‹¤ì œë¡œ ìœ„ì˜ ì‚¬ë¡€ëŠ” ì‹¤ë¬´ì—ì„œ ì§ì ‘ êµ¬í˜„í•œ í¼ ì¤‘ ì¼ë¶€ ìŠ¤í…ì„ ê°€ì ¸ì™€ êµ¬í˜„í•œ ì˜ˆì œë‹¤.

---

## ë¬¸ì œ 1. useStateë§Œìœ¼ë¡œ ë³µì¡í•œ ìƒíƒœë¥¼ ê´€ë¦¬í•  ë•Œ

useStateë¥¼ ì‚¬ìš©í•˜ë©´ ìƒíƒœê°€ ê°œë³„ì ìœ¼ë¡œ ì¡´ì¬í•œë‹¤. ë¬¸ì œëŠ” 'ì¬ì „ì†¡' ê°™ì€ ë³µí•©ì ì¸ ì•¡ì…˜ì´ ë°œìƒí•  ë•Œ, í•¸ë“¤ëŸ¬ í•¨ìˆ˜ í•˜ë‚˜ì—ì„œ ì—¬ëŸ¬ ìƒíƒœë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì¡°ì‘í•´ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤.

```tsx {5-8,18-21,23-27}
type Step = "PHONE" | "OTP" | "REGISTER";

export const SignupWithState = () => {
  // ğŸ˜« ìƒíƒœë“¤ì´ íŒŒí¸í™”ë˜ì–´ ìˆìŒ
  const [step, setStep] = useState<Step>("PHONE");
  const [phone, setPhone] = useState("");
  const [otp, setOtp] = useState("");
  const [timer, setTimer] = useState(0);

  // íƒ€ì´ë¨¸ (Effect)
  useEffect(() => {
    if (timer <= 0) return;
    const id = setInterval(() => setTimer((t) => t - 1), 1000);
    return () => clearInterval(id);
  }, [timer > 0]);

  // ğŸ˜« í•¸ë“¤ëŸ¬ í•¨ìˆ˜ê°€ ë¹„ëŒ€í•´ì§ (UI ë¡œì§ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ í˜¼ì¬)
  const handleSendOTP = () => {
    setStep("OTP");
    setTimer(420);
    setOtp("");
  };

  const handleResend = () => {
    // ì¬ì „ì†¡ ì‹œ íƒ€ì´ë¨¸ ë¦¬ì…‹, ì¸í’‹ ì´ˆê¸°í™” ë“± ì—°ê´€ëœ ìƒíƒœë¥¼ ê°œë°œìê°€ ì¼ì¼ì´ ê¸°ì–µí•´ì„œ ë°”ê¿”ì•¼ í•¨
    setTimer(420);
    setOtp("");
  };

  const handleVerify = () => {
    if (otp.length === 6) {
      setStep("REGISTER");
      setTimer(0);
    }
  };

  return (
    <div>
      {step === "PHONE" && (
        <>
          <PhoneInput value={phone} onChange={setPhone} />
          <Button onClick={handleSendOTP}>ì¸ì¦ë²ˆí˜¸ ë°›ê¸°</Button>
        </>
      )}

      {step === "OTP" && (
        <>
          <OTPInput value={otp} onChange={setOtp} />
          <Timer seconds={timer} />
          <Button onClick={handleResend} disabled={timer > 0}>
            ì¬ì „ì†¡
          </Button>
          <Button onClick={handleVerify}>í™•ì¸</Button>
        </>
      )}

      {step === "REGISTER" && <RegisterForm />}
    </div>
  );
};
```

### ë¬´ì—‡ì´ ë¬¸ì œì¼ê¹Œ?

1. **ì‹¤ìˆ˜ ê°€ëŠ¥ì„±**: `handleResend`ì—ì„œ ë§Œì•½ `setOtp('')`ë¥¼ ë¹¼ë¨¹ëŠ”ë‹¤ë©´? ì‚¬ìš©ìëŠ” ì´ì „ ì¸ì¦ë²ˆí˜¸ê°€ ë‚¨ì•„ìˆëŠ” ë²„ê·¸ë¥¼ ê²ªê²Œ ëœë‹¤.
2. **ìœ ì§€ë³´ìˆ˜**: ìƒíƒœê°€ í•˜ë‚˜ ëŠ˜ì–´ë‚˜ë©´(ì˜ˆ: ì—ëŸ¬ ë©”ì‹œì§€), ê´€ë ¨ëœ ëª¨ë“  í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ë‹¤ë‹ˆë©° ìˆ˜ì •í•´ì•¼ í•œë‹¤.

---

## useReducer ì‚¬ìš© ë°©ë²•

ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ì „ì—, ë¨¼ì € [`useReducer`](https://ko.react.dev/reference/react/useReducer)ê°€ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³´ì. `useReducer`ëŠ” ì»´í¬ë„ŒíŠ¸ì— reducerë¥¼ ì¶”ê°€í•˜ëŠ” React Hookì´ë‹¤.

```tsx
const [state, dispatch] = useReducer(reducer, initialArg, init?)
```

### ë§¤ê°œë³€ìˆ˜

`useReducer`ëŠ” ì„¸ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ”ë‹¤.

1. **reducer**: stateê°€ ì–´ë–»ê²Œ ì—…ë°ì´íŠ¸ë˜ëŠ”ì§€ ì§€ì •í•˜ëŠ” ìˆœìˆ˜ í•¨ìˆ˜. Stateì™€ Actionì„ ë°›ì•„ ë‹¤ìŒ Stateë¥¼ ë°˜í™˜í•œë‹¤.
2. **initialArg**: ì´ˆê¸° State ê°’. ëª¨ë“  ë°ì´í„° íƒ€ì…ì´ ê°€ëŠ¥í•˜ë‹¤.
3. **init**: (ì„ íƒ) ì´ˆê¸° Stateë¥¼ ë°˜í™˜í•˜ëŠ” ì´ˆê¸°í™” í•¨ìˆ˜. ì—†ìœ¼ë©´ `initialArg`ê°€ ì´ˆê¸°ê°’, ìˆìœ¼ë©´ `init(initialArg)` ê²°ê³¼ê°€ ì´ˆê¸°ê°’ì´ ëœë‹¤.

### ë°˜í™˜ê°’

`useReducer`ëŠ” ì •í™•íˆ ë‘ ê°œì˜ ê°’ì„ ê°€ì§„ ë°°ì—´ì„ ë°˜í™˜í•œë‹¤.

1. **state**: í˜„ì¬ ìƒíƒœ. ì²« ë²ˆì§¸ ë Œë”ë§ì—ì„œëŠ” `initialArg` ë˜ëŠ” `init(initialArg)`ë¡œ ì„¤ì •ëœë‹¤.
2. **dispatch**: stateë¥¼ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³  ë¦¬ë Œë”ë§ì„ íŠ¸ë¦¬ê±°í•˜ëŠ” í•¨ìˆ˜.

---

## í•´ê²° 1. useReducerë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ê¸°

**useReducer**ë¥¼ ì‚¬ìš©í•˜ë©´ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ useStateë¥¼ ì™„ì „íˆ ì œê±°í•  ìˆ˜ ìˆë‹¤. ì…ë ¥ê°’ ê´€ë¦¬ë¶€í„° ë‹¨ê³„ ì´ë™ê¹Œì§€ ëª¨ë“  ìƒíƒœ ë³€ê²½ ë¡œì§ì„ Reducer í•¨ìˆ˜ í•œ ê³³ì— ëª¨ì•„ë‘ê¸° ë•Œë¬¸ì´ë‹¤.

### Step 1: State & Action ì •ì˜

`Discriminated Union(êµ¬ë³„ëœ ìœ ë‹ˆì˜¨)`ì„ ì‚¬ìš©í•˜ì—¬ íƒ€ì… ì•ˆì •ì„±ì„ í™•ë³´í•œë‹¤. ì‰½ê²Œ ë§í•´, ê° ì•¡ì…˜ì˜ `type` ê°’ìœ¼ë¡œ ì–´ë–¤ ì•¡ì…˜ì¸ì§€ êµ¬ë¶„í•˜ê³ , TypeScriptê°€ ìë™ìœ¼ë¡œ í•´ë‹¹ ì•¡ì…˜ì— ë§ëŠ” ì†ì„±ì„ ì¶”ë¡ í•´ì£¼ëŠ” íŒ¨í„´ì´ë‹¤.

```ts
interface State {
  step: "PHONE" | "OTP" | "REGISTER";
  phone: string;
  otp: string;
  timer: number;
}

type Action =
  | { type: "SET_PHONE"; phone: string } // ì…ë ¥ í•¸ë“¤ë§
  | { type: "SET_OTP"; otp: string } // ì…ë ¥ í•¸ë“¤ë§
  | { type: "SEND_OTP" } // ë¡œì§: ì „ì†¡
  | { type: "RESEND_OTP" } // ë¡œì§: ì¬ì „ì†¡
  | { type: "VERIFY_SUCCESS" } // ë¡œì§: ì¸ì¦ ì™„ë£Œ
  | { type: "TICK" }; // ë¡œì§: íƒ€ì´ë¨¸ ê°ì†Œ
```

### Step 2: Reducer í•¨ìˆ˜ ì‘ì„±

"ë¬´ì—‡ì„ í•  ê²ƒì¸ê°€(Action)"ë§Œ ì •í•´ì£¼ë©´, "ì–´ë–»ê²Œ ë³€í•  ê²ƒì¸ê°€(State Change)"ëŠ” ì—¬ê¸°ì„œ ë‹¤ ì²˜ë¦¬í•œë‹¤.

```ts {8-9,12-13}
const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case "SET_PHONE":
      return { ...state, phone: action.phone };
    case "SET_OTP":
      return { ...state, otp: action.otp };
    case "SEND_OTP":
      // ì „ì†¡ ì‹œ: ë‹¤ìŒ ë‹¨ê³„ë¡œ ì´ë™ + íƒ€ì´ë¨¸ ì„¤ì • + ê¸°ì¡´ OTP í´ë¦¬ì–´
      return { ...state, step: "OTP", timer: 420, otp: "" };
    case "RESEND_OTP":
      // ì¬ì „ì†¡ ì‹œ: íƒ€ì´ë¨¸ ë¦¬ì…‹ + ê¸°ì¡´ OTP í´ë¦¬ì–´ (ë¡œì§ ì‘ì§‘)
      return { ...state, timer: 420, otp: "" };
    case "VERIFY_SUCCESS":
      return { ...state, step: "REGISTER", timer: 0 };
    case "TICK":
      return { ...state, timer: Math.max(0, state.timer - 1) };
    default:
      return state;
  }
};
```

### Step 3: ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©

ì´ì œ ì»´í¬ë„ŒíŠ¸ëŠ” UI ë Œë”ë§ê³¼ ì‚¬ìš©ìì˜ ì˜ë„(dispatch)ë¥¼ ì „ë‹¬í•˜ëŠ” ì—­í• ë§Œ ìˆ˜í–‰í•œë‹¤. ì½”ë“œê°€ í›¨ì”¬ ì„ ì–¸ì (Declarative)ìœ¼ë¡œ ë³€í–ˆë‹¤.

```tsx {4,15,24}
const initialState: State = { step: "PHONE", phone: "", otp: "", timer: 0 };

export const SignupWithReducer = () => {
  const [state, dispatch] = useReducer(reducer, initialState);

  // ğŸ’¡ ReducerëŠ” ìˆœìˆ˜ í•¨ìˆ˜ì—¬ì•¼ í•˜ë¯€ë¡œ, ì‹œê°„ì˜ íë¦„(Side Effect)ì€ Effectì—ì„œ ì²˜ë¦¬
  useEffect(() => {
    if (state.timer <= 0) return;
    const id = setInterval(() => dispatch({ type: "TICK" }), 1000);
    return () => clearInterval(id);
  }, [state.timer > 0]);

  return (
    <div>
      {state.step === "PHONE" && (
        <>
          <PhoneInput
            value={state.phone}
            onChange={(phone) => dispatch({ type: "SET_PHONE", phone })}
          />
          <Button onClick={() => dispatch({ type: "SEND_OTP" })}>
            ì¸ì¦ë²ˆí˜¸ ë°›ê¸°
          </Button>
        </>
      )}

      {state.step === "OTP" && (
        <>
          <OTPInput
            value={state.otp}
            onChange={(otp) => dispatch({ type: "SET_OTP", otp })}
          />
          <Timer seconds={state.timer} />

          {/* "ì¬ì „ì†¡ í•´ì¤˜"ë¼ê³  ì˜ë„ë§Œ ì „ë‹¬í•˜ë©´ ë! */}
          <Button
            onClick={() => dispatch({ type: "RESEND_OTP" })}
            disabled={state.timer > 0}
          >
            ì¬ì „ì†¡
          </Button>

          <Button
            onClick={() =>
              state.otp.length === 6 && dispatch({ type: "VERIFY_SUCCESS" })
            }
          >
            í™•ì¸
          </Button>
        </>
      )}

      {state.step === "REGISTER" && <RegisterForm />}
    </div>
  );
};
```

### ë­ê°€ ë‹¬ë¼ì¡Œì„ê¹Œ?

| ë¹„êµ í•­ëª©         | useState                   | useReducer                      |
| :---------------- | :------------------------- | :------------------------------ |
| **ìƒíƒœ ì„ ì–¸**     | 4ê°œì˜ ê°œë³„ useState        | 1ê°œì˜ í†µí•© State ê°ì²´           |
| **ì—…ë°ì´íŠ¸ ë¡œì§** | ê° í•¸ë“¤ëŸ¬ì— ë¶„ì‚°           | reducer í•œ ê³³ì— ì§‘ì¤‘            |
| **ì‹¤ìˆ˜ ê°€ëŠ¥ì„±**   | ë†’ìŒ (ì—°ê´€ ìƒíƒœ ëˆ„ë½ ìœ„í—˜) | ë‚®ìŒ (ì•¡ì…˜ ë‹¨ìœ„ë¡œ ì‘ì§‘)         |
| **í…ŒìŠ¤íŠ¸**        | ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ í•„ìš”       | reducer í•¨ìˆ˜ë§Œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ |

---

## Reducer ì‘ì„± ì‹œ ì£¼ì˜ì‚¬í•­

### 1. ReducerëŠ” ìˆœìˆ˜í•¨ìˆ˜ì—¬ì•¼ í•œë‹¤

**ìˆœìˆ˜í•¨ìˆ˜**ë€ ê°™ì€ ì…ë ¥ì— í•­ìƒ ê°™ì€ ì¶œë ¥ì„ ë°˜í™˜í•˜ê³ , ì™¸ë¶€ ìƒíƒœë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ë‹¤. ë§ˆì¹˜ ê³„ì‚°ê¸°ì²˜ëŸ¼, 2+3ì„ ë„£ìœ¼ë©´ ì–¸ì œë‚˜ 5ê°€ ë‚˜ì˜¤ëŠ” ê²ƒê³¼ ê°™ë‹¤. useStateì™€ ë§ˆì°¬ê°€ì§€ë¡œ, stateëŠ” ì½ê¸° ì „ìš©ì´ë‹¤. ê°ì²´ë‚˜ ë°°ì—´ì„ ì§ì ‘ ìˆ˜ì •í•˜ë©´ ì•ˆ ëœë‹¤.

```tsx {5-6,9}
function tasksReducer(tasks: Task[], action: Action) {
  switch (action.type) {
    case "added": {
      // âŒ ì˜ëª»ëœ ë°©ë²•: ê¸°ì¡´ ë°°ì—´ì„ ì§ì ‘ ìˆ˜ì •
      tasks.push({ id: action.id, text: action.text, done: false });
      return tasks;

      // âœ… ì˜¬ë°”ë¥¸ ë°©ë²•: ìƒˆ ë°°ì—´ì„ ë°˜í™˜
      return [...tasks, { id: action.id, text: action.text, done: false }];
    }
    // ...
  }
}
```

### 2. ê° ì•¡ì…˜ì€ ë‹¨ì¼ ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ì„ ë‚˜íƒ€ë‚¸ë‹¤

ì‚¬ìš©ìê°€ 5ê°œì˜ í•„ë“œê°€ ìˆëŠ” ì–‘ì‹ì—ì„œ "ì¬ì„¤ì •"ì„ ëˆ„ë¥´ë©´, 5ê°œì˜ ê°œë³„ `set_field` ì•¡ì…˜ë³´ë‹¤ í•˜ë‚˜ì˜ `reset_form` ì•¡ì…˜ì„ dispatchí•˜ëŠ” ê²ƒì´ ë” í•©ë¦¬ì ì´ë‹¤.

```tsx {2-6,9}
// âŒ ë‚˜ìœ ì˜ˆ: 5ê°œì˜ ê°œë³„ ì•¡ì…˜
dispatch({ type: "set_field_1", value });
dispatch({ type: "set_field_2", value });
dispatch({ type: "set_field_3", value });
dispatch({ type: "set_field_4", value });
dispatch({ type: "set_field_5", value });

// âœ… ì¢‹ì€ ì˜ˆ: 1ê°œì˜ ì˜ë¯¸ ìˆëŠ” ì•¡ì…˜
dispatch({ type: "reset_form" });
```

---

## ë¬¸ì œ 2. ì´ˆê¸°ê°’ ê³„ì‚°ì´ ë¬´ê±°ìš¸ ë•Œ

useStateì˜ Lazy Initializationê³¼ ë§ˆì°¬ê°€ì§€ë¡œ, useReducerì—ì„œë„ ì´ˆê¸°ê°’ ê³„ì‚°ì´ ë¬´ê±°ìš°ë©´ ë¬¸ì œê°€ ëœë‹¤.

```tsx {3}
function TodoApp({ username }: { username: string }) {
  // âŒ ë§¤ ë Œë”ë§ë§ˆë‹¤ createInitialState í˜¸ì¶œ
  const [state, dispatch] = useReducer(reducer, createInitialState(username));

  // ...
}
```

---

## í•´ê²° 2. init í•¨ìˆ˜ë¡œ Lazy Initialization

ì„¸ ë²ˆì§¸ ì¸ìì¸ `init` í•¨ìˆ˜ë¥¼ í™œìš©í•˜ë©´ ì´ˆê¸° ë Œë”ë§ì—ì„œë§Œ ì´ˆê¸°í™” ë¡œì§ì´ ì‹¤í–‰ëœë‹¤.

```tsx {2-8,12}
// ë¬´ê±°ìš´ ì´ˆê¸°í™” ë¡œì§
function createInitialState(username: string) {
  return {
    user: username,
    todos: loadTodosFromStorage(username), // localStorage ì ‘ê·¼
    preferences: loadPreferences(username), // ë³µì¡í•œ ê³„ì‚°
  };
}

function TodoApp({ username }: { username: string }) {
  // âœ… ì´ˆê¸° ë Œë”ë§ì—ì„œë§Œ createInitialState í˜¸ì¶œ
  const [state, dispatch] = useReducer(reducer, username, createInitialState);

  // ...
}
```

---

## ë¬¸ì œ 3. ì¤‘ì²© ê°ì²´ ì—…ë°ì´íŠ¸ê°€ ë²ˆê±°ë¡­ë‹¤

ReducerëŠ” ìˆœìˆ˜í•¨ìˆ˜ì—¬ì•¼ í•˜ë¯€ë¡œ ë¶ˆë³€ì„±ì„ ìœ ì§€í•´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ ì¤‘ì²© ê°ì²´ê°€ ê¹Šì–´ì§€ë©´ ì½”ë“œê°€ ë§¤ìš° ì¥í™©í•´ì§„ë‹¤.

```tsx {2-10}
// ğŸ˜« zip í•˜ë‚˜ë§Œ ë°”ê¾¸ê³  ì‹¶ì€ë°...
setUser({
  ...user,
  address: {
    ...user.address,
    district: {
      ...user.address.district,
      zip: "67890",
    },
  },
});
```

---

## í•´ê²° 3. Immerë¡œ ê°„í¸í•˜ê²Œ

[Immer](https://immerjs.github.io/immer/)ì˜ `useImmerReducer`ë¥¼ ì‚¬ìš©í•˜ë©´ ë§ˆì¹˜ ì§ì ‘ ìˆ˜ì •í•˜ëŠ” ê²ƒì²˜ëŸ¼ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ë¶ˆë³€ì„±ì€ Immerê°€ ì•Œì•„ì„œ ì²˜ë¦¬í•´ì¤€ë‹¤.

```bash
bun install immer use-immer
```

```tsx {1,6-8,11-12}
import { useImmerReducer } from "use-immer";

function tasksReducer(draft: Task[], action: Action) {
  switch (action.type) {
    case "added": {
      // âœ… draftë¥¼ ì§ì ‘ ìˆ˜ì •í•´ë„ OK
      draft.push({ id: action.id, text: action.text, done: false });
      break;
    }
    case "changed": {
      const index = draft.findIndex((t) => t.id === action.task.id);
      draft[index] = action.task;
      break;
    }
    case "deleted": {
      return draft.filter((t) => t.id !== action.id);
    }
  }
}

function TaskApp() {
  const [tasks, dispatch] = useImmerReducer(tasksReducer, initialTasks);
  // ...
}
```

`draft`ëŠ” ì›ë³¸ì˜ "ì„ì‹œ ë³µì‚¬ë³¸"ì´ë‹¤. ì´ê±¸ ë§ˆìŒëŒ€ë¡œ ë³€ê²½í•˜ë©´ Immerê°€ ì•Œì•„ì„œ ìƒˆë¡œìš´ ë¶ˆë³€ ê°ì²´ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.

---

## useReducer + Contextë¡œ ì „ì—­ ìƒíƒœ ê´€ë¦¬

`useReducer`ë¡œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ë©´, ê¹Šì€ ì»´í¬ë„ŒíŠ¸ë¡œ stateì™€ dispatchë¥¼ ì „ë‹¬í•  ë•Œ **prop drilling** ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. Prop drillingì´ë€ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ë‹¨ê³„ì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ê±°ì³ ì „ë‹¬í•´ì•¼ í•˜ëŠ” ìƒí™©ì„ ë§í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìµœìƒìœ„ â†’ ì¤‘ê°„ â†’ ìµœí•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ propsë¥¼ ê³„ì† ë‚´ë ¤ë³´ë‚´ì•¼ í•˜ëŠ” ê²½ìš°ë‹¤. Contextì™€ ê²°í•©í•˜ë©´ ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

### 1. Context ìƒì„±

```tsx
// TasksContext.tsx
import {
  createContext,
  useContext,
  useReducer,
  ReactNode,
  Dispatch,
} from "react";

const TasksContext = createContext<Task[] | null>(null);
const TasksDispatchContext = createContext<Dispatch<Action> | null>(null);
```

### 2. Provider ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°

```tsx {2-10}
// TasksContext.tsx
export function TasksProvider({ children }: { children: ReactNode }) {
  const [tasks, dispatch] = useReducer(tasksReducer, initialTasks);

  return (
    <TasksContext value={tasks}>
      <TasksDispatchContext value={dispatch}>{children}</TasksDispatchContext>
    </TasksContext>
  );
}
```

### 3. Custom Hooksë¡œ ê°„í¸í•˜ê²Œ ì‚¬ìš©

```tsx
// TasksContext.tsx
export function useTasks() {
  const context = useContext(TasksContext);
  if (!context) throw new Error("useTasks must be used within TasksProvider");
  return context;
}

export function useTasksDispatch() {
  const context = useContext(TasksDispatchContext);
  if (!context)
    throw new Error("useTasksDispatch must be used within TasksProvider");
  return context;
}
```

### 4. ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©

```tsx {6-8,16-17}
// App.tsx
import { TasksProvider } from "./TasksContext";

export default function TaskApp() {
  return (
    <TasksProvider>
      <h1>êµí†  ì—¬í–‰ ì¼ì •</h1>
      <AddTask />
      <TaskList />
    </TasksProvider>
  );
}

// TaskList.tsx
function TaskList() {
  const tasks = useTasks();
  const dispatch = useTasksDispatch();

  return (
    <ul>
      {tasks.map((task) => (
        <li key={task.id}>
          <Task task={task} dispatch={dispatch} />
        </li>
      ))}
    </ul>
  );
}
```

ì´ì œ propsë¥¼ ê±°ì¹˜ì§€ ì•Šê³ ë„ ì–´ë””ì„œë“  ìƒíƒœì™€ dispatchì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

---

## ê¿€íŒ: Reducer Map íŒ¨í„´

> ê³µì‹ ë¬¸ì„œì—ëŠ” ì—†ëŠ”, ì‹¤ë¬´ì—ì„œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•˜ëŠ” ë‚˜ë§Œì˜ íŒ¨í„´ì„ ì†Œê°œí•œë‹¤.

ìœ„ì—ì„œ ë§Œë“  íšŒì›ê°€ì… í¼ reducerë¥¼ ë‹¤ì‹œ ë³´ì. ì§€ê¸ˆì€ caseê°€ 6ê°œë‹¤. ê·¸ëŸ°ë° ì‹¤ë¬´ì—ì„œëŠ” ì–´ë–¨ê¹Œ? ì—ëŸ¬ ì²˜ë¦¬, ë¡œë”© ìƒíƒœ, ì¶”ê°€ ê²€ì¦ ë¡œì§ì´ ë“¤ì–´ê°€ë©´ caseê°€ 10ê°œ, 20ê°œë¡œ ëŠ˜ì–´ë‚œë‹¤.

switchë¬¸ì´ ê¸¸ì–´ì§€ë©´ ì–´ë–¤ ë¬¸ì œê°€ ìƒê¸¸ê¹Œ?

- ìŠ¤í¬ë¡¤ì„ ìœ„ì•„ë˜ë¡œ ì™”ë‹¤ê°”ë‹¤í•˜ë©´ì„œ ì°¾ì•„ì•¼ í•œë‹¤
- `RESEND_OTP`ê°€ ì–´ë”” ìˆëŠ”ì§€ `Ctrl+F`ë¡œ ê²€ìƒ‰í•´ì•¼ í•œë‹¤
- ìƒˆë¡œìš´ ì•¡ì…˜ì„ ì¶”ê°€í•  ë•Œ `default` ìœ„ì— caseë¥¼ ë„£ì–´ì•¼ í•˜ëŠ”ì§€ í—·ê°ˆë¦°ë‹¤

ì´ëŸ´ ë•Œ **ê°ì²´(Map)** ë¥¼ í™œìš©í•˜ë©´ í›¨ì”¬ ê¹”ë”í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.

### Before: switchë¬¸

ì•ì„œ ì‘ì„±í•œ íšŒì›ê°€ì… í¼ì˜ reducerë¥¼ ë‹¤ì‹œ ë³´ì.

```tsx
const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case "SET_PHONE":
      return { ...state, phone: action.phone };
    case "SET_OTP":
      return { ...state, otp: action.otp };
    case "SEND_OTP":
      return { ...state, step: "OTP", timer: 420, otp: "" };
    case "RESEND_OTP":
      return { ...state, timer: 420, otp: "" };
    case "VERIFY_SUCCESS":
      return { ...state, step: "REGISTER", timer: 0 };
    case "TICK":
      return { ...state, timer: Math.max(0, state.timer - 1) };
    default:
      return state;
  }
};
```

caseê°€ 6ê°œì¼ ë•Œë„ ì´ë¯¸ 20ì¤„ì´ ë„˜ëŠ”ë‹¤. ì‹¤ë¬´ì—ì„œëŠ” ì´ê²Œ 50ì¤„, 100ì¤„ì´ ë˜ê¸°ë„ í•œë‹¤.

### After: Reducer Map íŒ¨í„´

ì´ì œ ê°™ì€ ë¡œì§ì„ ê°ì²´ë¡œ í‘œí˜„í•´ë³´ì.

```tsx {2-13,16-17}
// 1. Reducer Map - ê° ì•¡ì…˜ì„ ë…ë¦½ì ì¸ í•¨ìˆ˜ë¡œ ê´€ë¦¬
const reducerMap: Record<
  Action["type"],
  (state: State, action: Action) => State
> = {
  SET_PHONE: (state, action) =>
    action.type === "SET_PHONE" ? { ...state, phone: action.phone } : state,
  SET_OTP: (state, action) =>
    action.type === "SET_OTP" ? { ...state, otp: action.otp } : state,
  SEND_OTP: (state) => ({ ...state, step: "OTP", timer: 420, otp: "" }),
  RESEND_OTP: (state) => ({ ...state, timer: 420, otp: "" }),
  VERIFY_SUCCESS: (state) => ({ ...state, step: "REGISTER", timer: 0 }),
  TICK: (state) => ({ ...state, timer: Math.max(0, state.timer - 1) }),
};

// 2. Reducer í•¨ìˆ˜ - ë‹¨ í•œ ì¤„!
const reducer = (state: State, action: Action): State =>
  reducerMap[action.type](state, action);
```

ì½”ë“œê°€ ì ˆë°˜ìœ¼ë¡œ ì¤„ì—ˆë‹¤. í•˜ì§€ë§Œ ë” ì¤‘ìš”í•œ ê±´ **ê°€ë…ì„±**ì´ë‹¤. ëª¨ë“  ì•¡ì…˜ì´ í•œëˆˆì— ë³´ì¸ë‹¤.

### ì™œ ì´ íŒ¨í„´ì´ ë” ì¢‹ì„ê¹Œ?

#### 1. í•œëˆˆì— ëª¨ë“  ì•¡ì…˜ì´ ë³´ì¸ë‹¤

switchë¬¸ì€ `case`, `return`, ë“¤ì—¬ì“°ê¸° ë•Œë¬¸ì— í•œ ì•¡ì…˜ì´ 3~4ì¤„ì„ ì°¨ì§€í•œë‹¤. reducerMapì€ ì•¡ì…˜ í•˜ë‚˜ê°€ ë”± í•œ ì¤„ì´ë‹¤. ìŠ¤í¬ë¡¤ ì—†ì´ ì „ì²´ ë¡œì§ì„ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.

#### 2. ìƒˆ ì•¡ì…˜ ì¶”ê°€ê°€ ì‰½ë‹¤

ìƒˆë¡œìš´ ì•¡ì…˜ `SET_ERROR`ë¥¼ ì¶”ê°€í•œë‹¤ê³  í•´ë³´ì.

```tsx
// switchë¬¸: case ì¶”ê°€ + ìœ„ì¹˜ ê³ ë¯¼
case "SET_ERROR":
  return { ...state, error: action.error };

// reducerMap: ê·¸ëƒ¥ í•œ ì¤„ ì¶”ê°€
SET_ERROR: (state, action) => ({ ...state, error: action.error }),
```

#### 3. TypeScriptê°€ ëˆ„ë½ì„ ì¡ì•„ì¤€ë‹¤

Action íƒ€ì…ì— `SET_ERROR`ë¥¼ ì¶”ê°€í–ˆëŠ”ë° reducerMapì— ì•ˆ ë„£ìœ¼ë©´? TypeScriptê°€ ë°”ë¡œ ì—ëŸ¬ë¥¼ ë„ìš´ë‹¤.

```tsx
// âŒ Type Error: Property 'SET_ERROR' is missing
const reducerMap: { [T in Action["type"]]: ActionHandler<T> } = {
  SET_PHONE: ...,
  // SET_ERROR ë¹ ëœ¨ë¦¼!
};
```

switchë¬¸ì—ì„œëŠ” ì´ëŸ° ì‹¤ìˆ˜ë¥¼ ì»´íŒŒì¼ íƒ€ì„ì— ì¡ê¸° ì–´ë µë‹¤.

#### 4. í…ŒìŠ¤íŠ¸ê°€ ì‰¬ì›Œì§„ë‹¤

ê° ì•¡ì…˜ í•¸ë“¤ëŸ¬ë¥¼ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆë‹¤.

```tsx
describe("reducerMap", () => {
  const initialState: State = { step: "PHONE", phone: "", otp: "", timer: 0 };

  it("SEND_OTP: OTP ë‹¨ê³„ë¡œ ì´ë™í•˜ê³  íƒ€ì´ë¨¸ë¥¼ 420ì´ˆë¡œ ì„¤ì •í•œë‹¤", () => {
    const result = reducerMap.SEND_OTP(initialState, { type: "SEND_OTP" });

    expect(result.step).toBe("OTP");
    expect(result.timer).toBe(420);
    expect(result.otp).toBe("");
  });

  it("TICK: íƒ€ì´ë¨¸ë¥¼ 1ì´ˆ ê°ì†Œì‹œí‚¨ë‹¤", () => {
    const state = { ...initialState, timer: 100 };
    const result = reducerMap.TICK(state, { type: "TICK" });

    expect(result.timer).toBe(99);
  });

  it("TICK: íƒ€ì´ë¨¸ê°€ 0 ë¯¸ë§Œìœ¼ë¡œ ë‚´ë ¤ê°€ì§€ ì•ŠëŠ”ë‹¤", () => {
    const state = { ...initialState, timer: 0 };
    const result = reducerMap.TICK(state, { type: "TICK" });

    expect(result.timer).toBe(0);
  });
});
```

switchë¬¸ì€ ë§¤ë²ˆ `reducer(state, { type: "..." })`ì²˜ëŸ¼ ì „ì²´ reducerë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤. reducerMapì€ `reducerMap.TICK(state, action)`ì²˜ëŸ¼ í•´ë‹¹ í•¨ìˆ˜ë§Œ ì§ì ‘ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆë‹¤.

### ì •ë¦¬

| í•­ëª©            | switchë¬¸                       | Reducer Map íŒ¨í„´            |
| :-------------- | :----------------------------- | :-------------------------- |
| **ê°€ë…ì„±**      | ì•¡ì…˜ë‹¹ 3~4ì¤„, ìŠ¤í¬ë¡¤ í•„ìš”      | ì•¡ì…˜ë‹¹ 1ì¤„, í•œëˆˆì— íŒŒì•…     |
| **íƒ€ì… ì•ˆì „ì„±** | ëˆ„ë½ëœ case ê°ì§€ ì–´ë ¤ì›€        | TypeScriptê°€ ëˆ„ë½ ì¦‰ì‹œ ì•Œë¦¼ |
| **í…ŒìŠ¤íŠ¸**      | reducer ì „ì²´ í˜¸ì¶œ í•„ìš”         | ê°œë³„ í•¨ìˆ˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥  |
| **í™•ì¥ì„±**      | case ì¶”ê°€ + ë“¤ì—¬ì“°ê¸° + default | í•œ ì¤„ ì¶”ê°€ë¡œ ë             |

switchë¬¸ì´ 5ê°œë¥¼ ë„˜ì–´ê°€ê¸° ì‹œì‘í•˜ë©´ ì´ íŒ¨í„´ì„ ê³ ë ¤í•´ë³´ì.

---

## useState vs useReducer ì–¸ì œ ë­˜ ì“¸ê¹Œ?

| í•­ëª©          | useState                    | useReducer                        |
| :------------ | :-------------------------- | :-------------------------------- |
| **ì½”ë“œëŸ‰**    | ì ìŒ                        | ì´ˆê¸° ì‘ì„±ëŸ‰ ë§ìŒ                  |
| **ê°€ë…ì„±**    | ê°„ë‹¨í•œ ìƒíƒœì— ì¢‹ìŒ          | ë³µì¡í•œ ë¡œì§ì— ìš°ìˆ˜                |
| **ë””ë²„ê¹…**    | ë¡œì§ì´ ë¶„ì‚°ë˜ì–´ ì¶”ì  ì–´ë ¤ì›€ | í•œ ê³³ì—ì„œ ëª¨ë“  ì—…ë°ì´íŠ¸ í™•ì¸ ê°€ëŠ¥ |
| **í…ŒìŠ¤íŠ¸**    | ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ í•„ìš”        | reducer í•¨ìˆ˜ë§Œ ë…ë¦½ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥   |
| **ì¶”ì²œ ìƒí™©** | ê°„ë‹¨í•œ ìƒíƒœ (1-2ê°œ)         | ë³µì¡í•œ ìƒíƒœ, ê´€ë ¨ ìƒíƒœê°€ ë§ì„ ë•Œ  |

### useReducerë¥¼ ì„ íƒí•˜ëŠ” ê¸°ì¤€

- ì—¬ëŸ¬ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ë¹„ìŠ·í•œ ë°©ì‹ìœ¼ë¡œ stateë¥¼ ì—…ë°ì´íŠ¸í•  ë•Œ
- ìƒíƒœ ì—…ë°ì´íŠ¸ ë¡œì§ì´ ë³µì¡í•´ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì½ê¸° ì–´ë ¤ìš¸ ë•Œ
- ìƒíƒœ ë³€ê²½ì„ ì‰½ê²Œ í…ŒìŠ¤íŠ¸í•˜ê³  ì‹¶ì„ ë•Œ
- ë””ë²„ê¹… ì‹œ "ì–´ë–¤ ì•¡ì…˜ì´ ì¼ì–´ë‚¬ëŠ”ì§€" ë¡œê·¸ë¡œ í™•ì¸í•˜ê³  ì‹¶ì„ ë•Œ

---

## í•µì‹¬ ì •ë¦¬

| ê°œë…                     | ì„¤ëª…                                                       |
| :----------------------- | :--------------------------------------------------------- |
| **dispatch**             | "ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚¬ëŠ”ì§€"ë¥¼ action ê°ì²´ë¡œ ì „ë‹¬                |
| **reducer**              | í˜„ì¬ stateì™€ actionì„ ë°›ì•„ ë‹¤ìŒ stateë¥¼ ë°˜í™˜í•˜ëŠ” ìˆœìˆ˜í•¨ìˆ˜  |
| **action**               | ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚¬ëŠ”ì§€ ì„¤ëª…í•˜ëŠ” ê°ì²´ (ë³´í†µ `type` í•„ë“œ í¬í•¨) |
| **Lazy Initialization**  | ë¬´ê±°ìš´ ì´ˆê¸°í™” ë¡œì§ì„ init í•¨ìˆ˜ë¡œ ë¶„ë¦¬                      |
| **useReducer + Context** | ì „ì—­ ìƒíƒœ ê´€ë¦¬ íŒ¨í„´ (prop drilling í•´ê²°)                   |

---

## ì°¸ê³ ìë£Œ

- [React ê³µì‹ ë¬¸ì„œ - useReducer](https://ko.react.dev/reference/react/useReducer)
- [React ê³µì‹ ë¬¸ì„œ - Extracting State Logic into a Reducer](https://react.dev/learn/extracting-state-logic-into-a-reducer)
- [React ê³µì‹ ë¬¸ì„œ - Scaling Up with Reducer and Context](https://react.dev/learn/scaling-up-with-reducer-and-context)
- [Immer ê³µì‹ ë¬¸ì„œ](https://immerjs.github.io/immer/)
- [use-immer GitHub](https://github.com/immerjs/use-immer)
