---
title: ë³µì¡í•œ ê¶Œí•œ, ê¹”ë”í•˜ê²Œ ê´€ë¦¬í•˜ê¸° - ABAC ë„ì…ê¸°
date: 2025-06-16
updatedDate: 2025-06-16
tags: [ABAC, RBAC, ê¶Œí•œ]
category: DEVELOPMENT
image: '/images/rbac-abac/thumbnail.webp'
---

import Highlight from '@/components/mdx/Highlight'

![ABACì€ ë˜ ë­ì•¼..?](/images/rbac-abac/thumbnail.webp)

# ê³¼ê±°ì— ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œê°€ ì£¼ëŠ” ê³ í†µ

ìš°ë¦¬ íŒ€ì´ ë§Œë“œëŠ” ì„œë¹„ìŠ¤ëŠ” ì²˜ìŒì—” **ì—­í•  ê¸°ë°˜ ê¶Œí•œ ê´€ë¦¬(RBAC)** ë§Œìœ¼ë¡œë„ ì¶©ë¶„í–ˆìŠµë‹ˆë‹¤.  
ê·¸ëŸ°ë° ì„œë¹„ìŠ¤ê°€ ì„±ì¥í•˜ë©´ì„œ ë‹¤ì–‘í•œ ì˜ˆì™¸ ì¼€ì´ìŠ¤ê°€ ìŸì•„ì§€ê³ , ì—­í• ë§Œìœ¼ë¡œëŠ” ì„¤ëª…ì´ ì•ˆ ë˜ëŠ” ê¶Œí•œì´ ì ì  ë§ì•„ì¡Œì£ .

ê·¸ë•Œ ë°œê²¬í•œ ê²ƒì´ ë°”ë¡œ **ì†ì„± ê¸°ë°˜ ê¶Œí•œ ê´€ë¦¬(ABAC)** ì˜€ìŠµë‹ˆë‹¤.  
ì´ ê¸€ì—ì„œëŠ” RBACê³¼ ABACì˜ ì°¨ì´ë¥¼ ì •ë¦¬í•˜ê³ ,  
ìš°ë¦¬ ì„œë¹„ìŠ¤ì—ì„œ **ABACìœ¼ë¡œ ë¦¬íŒ©í† ë§í•œ ê³¼ì •**ê³¼ **ê¶Œí•œ ê´€ë¦¬ì˜ ì‹œí–‰ì°©ì˜¤**ë¥¼ ê³µìœ í•´ë³´ë ¤ í•©ë‹ˆë‹¤.

---

## ğŸ“– RBAC vs ABAC â€” í•µì‹¬ë§Œ ì§šê³  ê°€ê¸°

|      | **RBAC**                  | **ABAC**                                                    |
| ---- | ------------------------- | ----------------------------------------------------------- |
| ì •ì˜ | Role-Based Access Control | Attribute-Based Access Control                              |
| ê¸°ì¤€ | ì‚¬ëŒì˜ **ì—­í• (Role)**     | ì‚¬ëŒê³¼ ë¦¬ì†ŒìŠ¤ì˜ **ì†ì„±(Attribute)**                         |
| ì˜ˆì‹œ | `ADMINì´ë©´ ê¸€ ì‚­ì œ ê°€ëŠ¥`  | `PRINCIPALì´ê³ , í•™ì›ì— canDeleteChallenge=trueë©´ ì‚­ì œ ê°€ëŠ¥` |

**ğŸ‘‰ í•µì‹¬:**

- **RBAC**: ì‹¬í”Œí•´ì„œ ì¢‹ì§€ë§Œ, ì„œë¹„ìŠ¤ê°€ ì»¤ì§€ë©´ í•œê³„ê°€ ì˜´.
- **ABAC**: ì¡°ê±´ê³¼ ì†ì„±ì„ í•¨ê»˜ ê³ ë ¤í•´ ë” ìœ ì—°í•œ ê¶Œí•œ ë¶€ì—¬ ê°€ëŠ¥.

---

# ğŸ“Œ ê·¸ë˜ì„œ ë­ê°€ ë¬¸ì œì¸ê°€ â€” ê¶Œí•œ ê´€ë¦¬ë¥¼ ë‘˜ëŸ¬ì‹¼ ì†Œì†Œí•˜ì§€ë§Œ ë¬´ì‹œë¬´ì‹œí•œ ì´ì•¼ê¸°

**ì´ˆê¸° ê¸°íš**

**ì±Œë¦°ì§€ëŠ” í•™ì› ë‚´ë¶€ì—ì„œ í•™ìƒë§Œ ì°¸ì—¬ ê°€ëŠ¥! (ì›ì¥ê³¼, ì„ ìƒë‹˜ì€ ì“¸ ìˆ˜ ì—†ìŒ)**

## ğŸ“… **1ì°¨ ê°œë°œ â€” MVP ì˜¤í”ˆ ì „ë‚ **

**PM:**

> â€œí•™ìƒì€ ìê¸°ê°€ ì“´ ì±Œë¦°ì§€ë§Œ ì‚­ì œí•  ìˆ˜ ìˆì–´ìš”!â€

**FE ê°œë°œì:**

> â€œë„¤ ì•Œê² ìŠµë‹ˆë‹¤, í˜¹ì‹œ ê·¸ ì´í›„ì— íŠ¹ì • ì—­í• ì˜ ì‚¬ëŒì´ ì±Œë¦°ì§€ ê¸€ì„ ì‚­ì œí•  ìˆ˜ ìˆì„ì¼ì´ ì¶”ê°€ë ê¹Œìš”?â€

**PM:**

> â€œì•„ë‡¨ì•„ë‡¨ ì—†ì„ ê²ƒ ê°™ì•„ìš”!â€

```tsx
import { useUser } from '@/hooks/useUser';

export default function ChallengeDetail({ challenge }) {
  const user = useUser();

  const isOwner = user.id === challenge.ownerId;

  return (
    <div>
      <h1>{challenge.title}</h1>
      <p>{challenge.content}</p>
      {isOwner && <button onClick={handleDelete}>ì‚­ì œ</button>}
    </div>
  );
}
```

> ìŒ.. ë­ ì´ ì •ë„ì•¼ ì‰½ì§€.

---

## ğŸ“… **2ì°¨ â€” PM ê¸ˆìš”ì¼ ë°¤ DM**

**PM:**

> â€œì•— ê°œë°œìë‹˜! ìš”ì¦˜ ì›ì¥ë‹˜ë“¤ì´ í•™ìƒë“¤ì´ ì´ìƒí•œ ì±Œë¦°ì§€ ê¸€ ì˜¬ë ¸ë‹¤ê³  ì§€ì›Œë‹¬ë¼ëŠ” ì—°ë½ì´ ì ì  ë§ì•„ì§€ê³  ìˆì–´ìš”â€¦ ê·¸ëŸ°ë° ì›ì¥ë‹˜ë“¤ì€ ì‚­ì œ ê¶Œí•œì´ ì—†ê³  ê²°êµ­ ì €í¬ ìª½ìœ¼ë¡œ ë¬¸ì˜ê°€ ì™€ì„œ ë²ˆê±°ë¡­ë”ë¼ê³ ìš” ğŸ˜¥â€
>
> â€œì¼ë‹¨ ì§€ê¸ˆì€ ì €í¬ íšŒì‚¬ ê´€ë¦¬ì(ADMIN)ë„ ë‹¤ë¥¸ í•™ì›ì˜ í•™ìƒë“¤ì˜ ì±Œë¦°ì§€ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆë„ë¡ ì¢€ ì—´ì–´ë‘ë©´ ì¢‹ê² ì–´ìš”! í•™ìƒì€ ë³¸ì¸ ê¸€ë§Œ ì‚­ì œ ê°€ëŠ¥í•˜ê³ , ì €í¬ íšŒì‚¬ ê´€ë¦¬ìëŠ” ì–´ë–¤ í•™ì›ì˜ í•™ìƒì´ ì˜¬ë¦° ì±Œë¦°ì§€ ê¸€ì´ë”ë¼ë„ ì‚­ì œ ê°€ëŠ¥í•˜ê²Œìš”!â€

**FE ê°œë°œì:**

> ìŒ?? ê·¸ëƒ¥ ì›ì¥ ì„ ìƒë‹˜ë„ ì‚­ì œê¶Œí•œì„ ë“œë¦´ê¹Œìš”?? (ê·¸ëƒ¥ ê·¸ë ‡ë‹¤ í•´ì£¼ì„¸ìš”)

**PM:**

> ì•„ë‹ˆìš”!!
> ì¼ë‹¨ì€ íšŒì‚¬ ê´€ë¦¬ì(ADMIN) ê³„ì •ìœ¼ë¡œ ë‹¤ë¥¸ í•™ì›ì˜ í•™ìƒë“¤ì˜ ì±Œë¦°ì§€ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì‹œë©´ ì¶©ë¶„í•  ê²ƒ ê°™ì•„ìš”!!

**FE ê°œë°œì:**

> ë„µë„µ ê·¸ëŸ¼ í•´ë‹¹ ê¸°ëŠ¥ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤!

```tsx
import { useUser } from '@/hooks/useUser';

export default function ChallengeDetail({ challenge }) {
  const user = useUser();

  // ë³¸ì¸ì´ ì“´ ê¸€
  const isOwner = user.id === challenge.ownerId;
  // ê´€ë¦¬ì ê³„ì •
  const isAdmin = user.appRole === 'ADMIN';

  const canDelete = isOwner || isAdmin;

  return (
    <div>
      <h1>{challenge.title}</h1>
      <p>{challenge.content}</p>
      {canDelete && <button onClick={handleDelete}>ì‚­ì œ</button>}
    </div>
  );
}
```

> ì˜¤â€¦ ë­”ê°€ ë” ë³µì¡í•´ì§ˆ ê²ƒ ê°™ì€ë°..

---

## ğŸ“… **3ì°¨ â€” ì›”ìš”ì¼ ì•„ì¹¨ DM**

**PM:**

> â€œì•ˆë…•í•˜ì„¸ìš”! ì •ë§ ì£„ì†¡í•˜ì§€ë§Œ ë§ˆì§€ë§‰ìœ¼ë¡œ í•˜ë‚˜ ë” ë¶€íƒë“œë ¤ìš”!
>
> ì›ì¥ë‹˜(PRINCIPAL) ê¶Œí•œì„ ê°€ì§„ ë¶„ë“¤ë„ ìê¸° í•™ì›ì—ì„œ í•™ìƒë“¤ì´ ì˜¬ë¦° ì±Œë¦°ì§€ëŠ” ììœ ë¡­ê²Œ ì‚­ì œí•  ìˆ˜ ìˆê²Œ í•´ì£¼ì„¸ìš”!
>
> ì €í¬ê°€ ë‹¤ë¥¸ ì—…ë¬´ë•Œë¬¸ì— ì§€ì†ì ìœ¼ë¡œ CS ì²˜ë¦¬í•˜ê¸°ë„ ì‰½ì§€ ì•Šê³ , ê·¸ëƒ¥ ì´ì „ì— ë§ì”€í•´ì£¼ì‹  ê²ƒ ì²˜ëŸ¼ ì›ì¥ë‹˜ë“¤ì´ ì§ì ‘ ì§€ìš°ì‹œê²Œ í•˜ëŠ”ê²Œ ë” ì¢‹ì€ ë°©í–¥ì„± ê°™ì•„ìš”!

**FE ê°œë°œì:**

> (..? ì €ë²ˆì— ì¶”ê°€ ì•ˆëœë‹¤ë©°ìš” ğŸ¤”)
>
> ë„¤, ì•Œê² ìŠµë‹ˆë‹¤! í•™ì›ë³„ ì›ì¥ë‹˜ ê¶Œí•œë„ ë³¸ì¸ í•™ì›ì˜ í•™ìƒë“¤ ì±Œë¦°ì§€ëŠ” ì‚­ì œ ê°€ëŠ¥í•˜ê²Œ ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤.

```tsx
import { useUser } from '@/hooks/useUser';

export default function ChallengeDetail({ challenge }) {
  const user = useUser();

  // ë³¸ì¸ì´ ì“´ ê¸€
  const isOwner = user.id === challenge.ownerId;
  // ê´€ë¦¬ì ê³„ì •
  const isAdmin = user.appRole === 'ADMIN';
  // ë³¸ì¸ í•™ì›ì—ì„œì˜ ì—­í• ì´ ì›ì¥ì¸ ê²½ìš°
  const isPrincipal = user.academyRoles[challenge.academyId] === 'PRINCIPAL';

  const canDelete = isOwner || isAdmin || isPrincipal;

  return (
    <div>
      <h1>{challenge.title}</h1>
      <p>{challenge.content}</p>
      {canDelete && <button onClick={handleDelete}>ì‚­ì œ</button>}
    </div>
  );
}
```

> ì˜¤â€¦ ì ì  ê¼¬ì¸ë‹¤?

---

## ğŸ“… **4ì°¨ â€” í™”ìš”ì¼ ìƒˆë²½ DM**

**PM:**

> â€œê·¼ë°â€¦ ì›ì¥ë‹˜ì´ í•œ í•™ì›ì— ì—¬ëŸ¬ ëª… ìˆì„ ìˆ˜ ìˆì–ì•„ìš”.
>
> ê·¸ì¤‘ì—ì„œ ì‚­ì œ ê¸°ëŠ¥ ê¶Œí•œì´ ì—†ëŠ” ì›ì¥ë‹˜ë„ ìˆì–´ìš”.
>
> ê·¸ëŸ° ì›ì¥ë‹˜ë“¤ì€ ì‚­ì œ ë²„íŠ¼ì„ ëª» ëˆ„ë¥´ê²Œ í•´ì£¼ì„¸ìš”!â€

**FE ê°œë°œì:**

> ë„¤â€¦ ì•Œê² ìŠµë‹ˆë‹¤.
>
> ê·¸ ë¶€ë¶„ì€ ë°±ì—”ë“œì—ì„œ **ì›ì¥ë³„ ì±Œë¦°ì§€ ì‚­ì œ ê¶Œí•œ ì—¬ë¶€**ë¥¼ ë‚´ë ¤ì£¼ì…”ì•¼ í•  ê²ƒ ê°™ì•„ìš”.
>
> ì§€ê¸ˆì€ ë‹¨ìˆœíˆ ì—­í• (PRINCIPAL)ë§Œ ë‚´ë ¤ì˜¤ê³  ìˆì–´ì„œ, ì‚­ì œ ê°€ëŠ¥ ì—¬ë¶€ í”Œë˜ê·¸ ê°™ì€ ì„¸ë¶€ ê¶Œí•œ ë°ì´í„°ê°€ í•„ìš”í•´ìš”.
>
> ë°±ì—”ë“œë‘ í˜‘ì˜í•´ì„œ í•´ë‹¹ ë°ì´í„° ë°›ëŠ” í˜•íƒœë¡œ ìˆ˜ì •í•˜ê³ , ê·¸ê±¸ ê¸°ë°˜ìœ¼ë¡œ ë²„íŠ¼ ë…¸ì¶œ ì—¬ë¶€ ì²˜ë¦¬í•˜ê² ìŠµë‹ˆë‹¤.

**(ì†ìœ¼ë¡œ: ì§„ì‘ ì–˜ê¸°í•˜ì§€ ì´ê±¸ ì´ì œ ì™€ì„œâ€¦)**

```tsx
import { useUser } from '@/hooks/useUser';

export default function ChallengeDetail({ challenge }) {
  const user = useUser();

  const isOwner = user.id === challenge.ownerId;
  const isAdmin = user.appRole === 'ADMIN';
  const isPrincipal = user.academyRoles[challenge.academyId] === 'PRINCIPAL';
  // ë°±ì—”ë“œí•œí…Œ canDeleteChallengeë¥¼ ë°›ì•˜ë‹¤.
  const canPrincipalDelete =
    isPrincipal &&
    user.academyRolesDetail[challenge.academyId]?.canDeleteChallenge;

  const canDelete = isOwner || isAdmin || canPrincipalDelete;

  return (
    <div>
      <h1>{challenge.title}</h1>
      <p>{challenge.content}</p>
      {canDelete && <button onClick={handleDelete}>ì‚­ì œ</button>}
    </div>
  );
}
```

> ì´ì œë¶€í„° ì¡°ê±´ì´ ê½¤ ë³µì¡í•´ì§€ê³  ìœ ì§€ë³´ìˆ˜ê°€ ë¬´ì„­ê¸° ì‹œì‘í•¨â€¦

---

## ğŸš€ ê²°êµ­ ëŒ€ëŒ€ì ì¸ ë¦¬íŒ©í† ë§ ì‹œì‘

ìµœê·¼ ìš°ë¦¬ ì„œë¹„ìŠ¤ì˜ **v2 ë²„ì „ ì¶œì‹œ ì¤€ë¹„**ë¥¼ í•˜ë©´ì„œ ìì—°ìŠ¤ëŸ½ê²Œ ê¶Œí•œ ì²´ê³„ë¥¼ ë‹¤ì‹œ ì„¤ê³„í•˜ê²Œ ëìŠµë‹ˆë‹¤.

v1ì—ì„œëŠ” `PRINCIPAL`ì´ë©´ ë¬´ì¡°ê±´ ì‚­ì œ ê°€ëŠ¥, `STUDENT`ëŠ” ë¬´ì¡°ê±´ ì‚­ì œ ë¶ˆê°€â€¦ ê°™ì€ ë‹¨ìˆœí•œ ê¶Œí•œ êµ¬ì¡°ì˜€ëŠ”ë°,

**v2ì—ì„œëŠ” ì›ì¥ë‹˜ë„ ì‚­ì œ ê¶Œí•œì´ ì—†ëŠ” ê²½ìš°ê°€ ìƒê¸°ê³ **, í•™ì›ë§ˆë‹¤ ë‹¤ë¥¸ ê¶Œí•œì„ ì¤˜ì•¼ í•˜ëŠ” ìƒí™©ì´ ì˜¤ë©´ì„œ ê¸°ì¡´ ë°©ì‹ìœ¼ë¡œëŠ” ë” ì´ìƒ ìœ ì—°í•˜ê²Œ ëŒ€ì‘í•˜ê¸° ì–´ë ¤ì›Œì¡Œì£ .

ê·¸ë˜ì„œ ë§ì´ ê³ ë¯¼í•˜ê³  ìœ íŠœë¸Œë‚˜, Medium ë¸”ë¡œê·¸ ê¸€ì„ ì°¾ì•„ë³´ê³ , ì°¸ê³ í•˜ë©´ì„œ ì•„ë˜ì™€ ê°™ì´ `ABAC`ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë¦¬íŒ©í† ë§ì„ ì§„í–‰í•˜ê²Œ ëìŠµë‹ˆë‹¤.

**í•µì‹¬ì€**

âœ… ê¶Œí•œì„ **ì•± ì „ì—­ ê¶Œí•œ**ê³¼ **í•™ì› ê¶Œí•œ**ìœ¼ë¡œ ë¶„ë¦¬í•˜ê³ ,

âœ… ê° ê¶Œí•œì˜ ì„¸ë¶€ ì•¡ì…˜ ë³„ë¡œ **boolean í˜¹ì€ ì»¤ìŠ¤í…€ ë¡œì§**ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

---

## ğŸ“Œ ê¸°ì¡´ ë¬¸ì œì 

- **ì—­í•  ë‹¨ìœ„ë¡œ ê¶Œí•œì„ í•˜ë“œì½”ë”©**
  - `if (user.role === 'PRINCIPAL')`
  - â†’ ì›ì¥ë§ˆë‹¤ ê¶Œí•œì´ ë‹¤ë¥¼ ìˆ˜ ìˆëŠ”ë° ì´ê±¸ ì½”ë“œë§ˆë‹¤ ifë¡œ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŒ
- **í•™ì› ë‹¨ìœ„ ê¶Œí•œì´ ì—†ìŒ**
  - í•œ ì‚¬ëŒì´ ì—¬ëŸ¬ í•™ì›ì— ì†Œì†ë˜ì–´ ìˆì„ ìˆ˜ ìˆê³ , í•™ì›ë§ˆë‹¤ ì—­í• ì´ ë‹¤ë¥¸ë° ê·¸ê±¸ ê³ ë ¤í•  ìˆ˜ ì—†ìŒ
- **ê¶Œí•œ í™•ì¸ ë¡œì§ì´ ì—¬ê¸°ì €ê¸° í©ì–´ì§**
  - ê¸°ëŠ¥ë§ˆë‹¤ ê¶Œí•œ í™•ì¸í•˜ëŠ” ë°©ì‹ì´ ì œê°ê° â†’ ìœ ì§€ë³´ìˆ˜ ì§€ì˜¥

---

## âš¡ï¸ ìƒˆ ê¶Œí•œ ì‹œìŠ¤í…œ êµ¬ì¡°

### ğŸ  ê¶Œí•œ ê°œë… ì •ë¦¬

- **ì•± ì „ì—­ ê¶Œí•œ(AppRole)**
  - ì„œë¹„ìŠ¤ ì „ì²´ì—ì„œ ì ìš©ë˜ëŠ” ê¶Œí•œ (ex. ADMIN)
- **í•™ì› ê¶Œí•œ(AcademyRole)**
  - íŠ¹ì • í•™ì› ë‚´ì—ì„œì˜ ì—­í•  (ex. PRINCIPAL, TEACHER, STUDENT)
- **ë¦¬ì†ŒìŠ¤(Resource)**
  - ê¶Œí•œì„ ì²´í¬í•  ëŒ€ìƒ (ex. Challenge)
- **ì•¡ì…˜(Action)**
  - í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•´ í•˜ê³  ì‹¶ì€ í–‰ìœ„ (ex. view, create, update, delete)

## ğŸ“Œ ì „ì²´ ì½”ë“œ êµ¬ì„± ì„¤ëª…

### ğŸ—‚ï¸ ì—­í• , ë¦¬ì†ŒìŠ¤, ì•¡ì…˜ ì •ì˜

```tsx
export type AppRole = 'ADMIN' | 'USER';
export type AcademyRole = 'PRINCIPAL' | 'TEACHER' | 'STUDENT';

export type Challenge = {
  id: string;
  title: string;
  content: string;
  ownerId: string;
  academyId: string;
};
```

â†’ **ì¶”ê°€ì ì¸ ë¦¬ì†ŒìŠ¤, ì—­í• ì„ ì„ ì–¸í•˜ê³  ì‹¶ìœ¼ë©´ ì—¬ê¸°ë§Œ ìˆ˜ì •í•˜ë©´ ë¨**

---

### ğŸ§‘ ì‚¬ìš©ì êµ¬ì¡° ì •ì˜

```tsx
export type User = {
  id: string;
  appRole: AppRole;
  blockedBy: string[];
  academyRoles: {
    [academyId: string]: AcademyRole;
  };
  academyRolesDetail?: {
    [academyId: string]: {
      canDeleteChallenge?: boolean;
    };
  };
};
```

â†’ í•™ì›ë§ˆë‹¤ ë‹¤ë¥¸ ê¶Œí•œ ì„¸ë¶€ ì„¤ì •ì„ ìœ„í•´ `academyRolesDetail`ë¥¼ ì¶”ê°€

---

### ğŸ·ï¸ ê¶Œí•œ ì •ì±… í…Œì´ë¸”

**ì•± ì „ì—­ ê¶Œí•œ**

```tsx
export const APP_ROLES: RolesWithPermissions = {
  ADMIN: {
    challenges: {
      view: true,
      create: true,
      update: true,
      delete: true,
    },
  },
  USER: {
    challenges: {
      view: (user, challenge) => !user.blockedBy.includes(challenge.ownerId),
      create: true,
      update: (user, challenge) => user.id === challenge.ownerId,
      delete: (user, challenge) => user.id === challenge.ownerId,
    },
  },
};
```

**í•™ì› ê¶Œí•œ**

```tsx
export const ACADEMY_ROLES: AcademyRolesWithPermissions = {
  PRINCIPAL: {
    challenges: {
      delete: (user, challenge) => {
        const role = user.academyRoles[challenge.academyId];
        const detail = user.academyRolesDetail?.[challenge.academyId];
        return role === 'PRINCIPAL' && detail?.canDeleteChallenge === true;
      },
    },
  },
  TEACHER: {
    challenges: {
      delete: false,
    },
  },
  STUDENT: {
    challenges: {
      delete: (user, challenge) => user.id === challenge.ownerId,
    },
  },
};
```

### ğŸ“Œ í¬ì¸íŠ¸

- ê°’ì€ **boolean** ë˜ëŠ” **ì»¤ìŠ¤í…€ í•¨ìˆ˜**
- ìƒí™©ì— ë”°ë¼ **ìœ ì € ì •ë³´ì™€ ë¦¬ì†ŒìŠ¤ ì •ë³´**ë¥¼ ë°›ì•„ ê¶Œí•œ ì—¬ë¶€ë¥¼ ë™ì ìœ¼ë¡œ íŒë‹¨ ê°€ëŠ¥

---

### âœ… hasPermission ìœ í‹¸ í•¨ìˆ˜

ëª¨ë“  ê¶Œí•œ í™•ì¸ì€ ì´ í•¨ìˆ˜ë¡œ í†µì¼í•©ë‹ˆë‹¤.

```tsx
export function hasPermission<Resource extends keyof Permissions>(
  user: User,
  resource: Resource,
  action: keyof Permissions[Resource],
  data?: Permissions[Resource]['dataType']
): boolean {
  // ì•± ê¶Œí•œ ìš°ì„  ê²€ì‚¬
  const appPermission = APP_ROLES[user.appRole]?.[resource]?.[action];
  if (typeof appPermission === 'function') {
    return appPermission(user, data);
  }
  if (typeof appPermission === 'boolean') {
    if (appPermission) return true;
  }

  // í•™ì› ê¶Œí•œ ê²€ì‚¬
  const academyRole = data?.academyId
    ? user.academyRoles[data.academyId]
    : null;
  if (!academyRole) return false;

  const academyPermission = ACADEMY_ROLES[academyRole]?.[resource]?.[action];
  if (typeof academyPermission === 'function') {
    return academyPermission(user, data);
  }
  if (typeof academyPermission === 'boolean') {
    return academyPermission;
  }

  return false;
}
```

---

### ë¦¬íŒ©í† ë§ í›„ê¸°

ê¸°ì¡´ ì½”ë“œëŠ” ì‹¤ì œë¡œ ê¶Œí•œ ë¡œì§ì´ UI ë ˆë²¨ì— í¼ì ¸ ìˆì—ˆìŠµë‹ˆë‹¤.

```tsx
const isOwner = user.id === challenge.ownerId;
const isAdmin = user.appRole === 'ADMIN';
const isPrincipal = user.academyRoles[challenge.academyId] === 'PRINCIPAL';
const canPrincipalDelete =
  isPrincipal &&
  user.academyRolesDetail[challenge.academyId]?.canDeleteChallenge;

const canDelete = isOwner || isAdmin || canPrincipalDelete;
```

ë¦¬íŒ©í† ë§ í›„ì—ëŠ” ì´ì œ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
const canDelete = hasPermission(user, 'challenges', 'delete', challenge);
```

ê¶Œí•œ ì¡°ê±´ì´ UIì— ì„ì´ì§€ ì•Šê³ , ê¶Œí•œ í…Œì´ë¸”ì—ë§Œ ì •ì˜ë˜ì–´ ìˆê³ 

ì–´ë””ì„œë“  ì¼ê´€ë˜ê²Œ **`hasPermission`** í•œ ì¤„ë¡œ ì²´í¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì „ì²´ ì½”ë“œë¥¼ ë¹„êµí•˜ë©´ í›¨ì”¬ ì§ê´€ì ìœ¼ë¡œ ë³€ê²½í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
import { useUser } from '@/hooks/useUser';
import { hasPermission } from '@/permissions/hasPermission';

export default function ChallengeDetail({ challenge }) {
  const user = useUser();

  const canDelete = hasPermission(user, 'challenges', 'delete', challenge);

  return (
    <div>
      <h1>{challenge.title}</h1>
      <p>{challenge.content}</p>
      {canDelete && <button onClick={handleDelete}>ì‚­ì œ</button>}
    </div>
  );
}
```

ì´ì œ ì•ìœ¼ë¡œ **ê¶Œí•œ ì •ì±…ì´ ë°”ë€Œì–´ë„** `APP_ROLES`**,** `ACADEMY_ROLES` **í…Œì´ë¸”ë§Œ ìˆ˜ì •í•˜ë©´ ë¹„êµì  ì‰½ê²Œ ê¶Œí•œ ë¬¸ì œë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

í”„ë¡ íŠ¸ì—”ë“œë„ ê°€ë…ì„±/ìœ ì§€ë³´ìˆ˜ì„± ë‹¤ ì˜¬ë¼ê°€ê³ , ê¸°íš ìª½ì—ì„œ **â€œì›ì¥ë§Œ ì‚­ì œ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ì„¸ìš”â€** ê°™ì€ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ì„œë²„ì—ì„œ ê´€ë ¨ ë°ì´í„°ë¥¼ ì œê³µ ë°›ê³  ìˆë‹¤ë©´ ë¹„êµì  ì†ì‰½ê²Œ ê¶Œí•œë¬¸ì œë¥¼ ì²˜ë¦¬í•˜ì—¬ ë°”ë¡œ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ“Œ ì‚¬ì‹¤, í•œ ê°€ì§€ ë” ë¬¸ì œê°€ ìˆì—ˆë‹¤

ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ë‹¤ ë³´ë©´ ê¸°ëŠ¥ì´ ì¶”ê°€ë ìˆ˜ë¡ ê¸°ì¡´ ì½”ë“œê°€ ê¹¨ì§€ëŠ” ê²½í—˜ì„ ë§ì´ í•˜ê²Œ ë©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ì›ì¥ ì„ ìƒë‹˜ë„ ì±Œë¦°ì§€ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆê²Œ ê¶Œí•œì„ ì—´ì–´ì¤¬ëŠ”ë°, ê·¸ëŸ¬ë‹¤ ë³´ë‹ˆ **ìê¸° ê²Œì‹œê¸€ì€ ì‚­ì œ ì˜ ë˜ë˜ ê²Œ ì›ì¥ ê¶Œí•œ ì¶”ê°€í•˜ë©´ì„œ ê°‘ìê¸° ì‚­ì œê°€ ì•ˆ ëœë‹¤ê±°ë‚˜,**

í˜¹ì€ ê¶Œí•œ ì¡°ê±´ì´ ì ì  ë³µì¡í•´ì§€ë©´ì„œ **ë‹¤ë¥¸ ì‚¬ëŒì´ ì½”ë“œë¥¼ ì½ì–´ë„ ë§¥ë½ì„ ë°”ë¡œ ì´í•´í•˜ì§€ ëª»í•˜ëŠ” ìƒí™©**ì´ ì¢…ì¢… ë°œìƒí–ˆìŠµë‹ˆë‹¤.

ê¶Œí•œì€ íŠ¹íˆ UIì™€ ì„œë²„ ì–‘ìª½ì—ì„œ **ìƒí™©ì— ë”°ë¼ ì˜ˆì™¸ì²˜ë¦¬ê°€ ë§ë‹¤ ë³´ë‹ˆ** ë¡œì§ì´ í©ì–´ì§€ê³  ê¼¬ì´ê¸° ë”± ì¢‹ì€ ì˜ì—­ì…ë‹ˆë‹¤.

---

## ğŸ¤” ê·¸ë˜ì„œ, í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì¶”ê°€í–ˆë‹¤

ê²°êµ­ ê¶Œí•œ ë¡œì§ì„ ë¦¬íŒ©í† ë§í•œ ê²ƒë„ ì¢‹ì€ë°, **ì´ ë¡œì§ì´ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€, ìƒˆë¡œìš´ ì •ì±…ì´ ì¶”ê°€ë  ë•Œ ê¸°ì¡´ ì •ì±…ì´ ë§ê°€ì§€ì§€ ì•ŠëŠ”ì§€** í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¥ì¹˜ê°€ í•„ìš”í–ˆìŠµë‹ˆë‹¤.

ë°”ë¡œ **í…ŒìŠ¤íŠ¸ ì½”ë“œ**. ê·¼ë° í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ë‹ˆ ë˜ ì¢‹ì€ ê²Œ ìˆì—ˆìŠµë‹ˆë‹¤.

> ğŸ‘‰ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ê²°êµ­ ë‚´ê°€ ì§  ì½”ë“œì— ëŒ€í•œ ì„¤ëª…ì„œ ì—­í• ì„ í•©ë‹ˆë‹¤.
>
> ì¦‰, í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ ë´ë„ ì´ ê¶Œí•œ ë¡œì§ì´ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì‰½ê²Œ íŒŒì•… ê°€ëŠ¥.
> ë¬¼ë¡  ë¤ìœ¼ë¡œ ì½”ë“œ ì•ˆì •ì„±ë„ í™•ë³´í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ğŸ˜€

```tsx
import { describe, it, expect } from 'vitest';
import { hasPermission, type User, type Challenge } from './permission';

describe('âœ… ABAC - ì•± ì „ì—­ ì—­í•  & í•™ì› ì—­í• ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸', () => {
  const ì±Œë¦°ì§€: Challenge = {
    id: 'c1',
    title: 'ABAC í…ŒìŠ¤íŠ¸',
    content: 'í…ŒìŠ¤íŠ¸ìš© ë‚´ìš©',
    ownerId: 'student1',
    academyId: 'A1',
  };

  const ê´€ë¦¬ì: User = { ... };
  const í•™ìƒ: User = { ... };
  const ì‚­ì œê¶Œí•œìˆëŠ”ì›ì¥: User = { ... };
  const ì‚­ì œê¶Œí•œì—†ëŠ”ì›ì¥: User = { ... };

  it('ğŸ”‘ ADMINì€ ì–´ë–¤ ì±Œë¦°ì§€ë“  ì‚­ì œí•  ìˆ˜ ìˆë‹¤', () => {
    expect(hasPermission(ê´€ë¦¬ì, 'challenges', 'delete', ì±Œë¦°ì§€)).toBe(true);
  });

  it('ğŸ”‘ STUDENTëŠ” ìê¸° ì±Œë¦°ì§€ëŠ” ì‚­ì œí•  ìˆ˜ ìˆë‹¤', () => {
    expect(hasPermission(í•™ìƒ, 'challenges', 'delete', ì±Œë¦°ì§€)).toBe(true);
  });

  it('ğŸ”‘ ì‚­ì œ ê¶Œí•œì´ ìˆëŠ” ì›ì¥ì€ í•™ìƒ ì±Œë¦°ì§€ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆë‹¤', () => {
    expect(hasPermission(ì‚­ì œê¶Œí•œìˆëŠ”ì›ì¥, 'challenges', 'delete', ì±Œë¦°ì§€)).toBe(true);
  });

  it('ğŸ”‘ ì‚­ì œ ê¶Œí•œì´ ì—†ëŠ” ì›ì¥ì€ í•™ìƒ ì±Œë¦°ì§€ë¥¼ ì‚­ì œí•  ìˆ˜ ì—†ë‹¤', () => {
    expect(hasPermission(ì‚­ì œê¶Œí•œì—†ëŠ”ì›ì¥, 'challenges', 'delete', ì±Œë¦°ì§€)).toBe(false);
  });

  it('ğŸ”‘ ì°¨ë‹¨ëœ ì‚¬ìš©ìëŠ” ì±Œë¦°ì§€ë¥¼ ë³¼ ìˆ˜ ì—†ë‹¤', () => {
    const ì°¨ë‹¨ëœì‚¬ìš©ì: User = { ... };
    expect(hasPermission(ì°¨ë‹¨ëœì‚¬ìš©ì, 'challenges', 'view', ì±Œë¦°ì§€)).toBe(false);
  });
});

```

![vitest í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ë‚´ ì½”ë“œì— ëŒ€í•œ ì„¤ëª…ì„œ](/images/rbac-abac/abac-test.webp)

---

## ğŸ“Œ ë§ˆë¬´ë¦¬

**RBAC**ë§Œìœ¼ë¡œëŠ” ë³µì¡í•œ ê¶Œí•œ ì¼€ì´ìŠ¤ë¥¼ ê°ë‹¹í•˜ê¸° ì‰½ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
**ABAC**ìœ¼ë¡œ ì„¤ê³„ë¥¼ ë°”ê¾¸ë‹ˆ ë³µì¡í•œ ì˜ˆì™¸ ì¼€ì´ìŠ¤ë„ ê¸°ì¡´ ë°©ì‹ì— ë¹„í•´ ê¹”ë”íˆ ì²˜ë¦¬ë˜ê³ ,
ê¶Œí•œ ë¡œì§ì´ í©ì–´ì§€ì§€ ì½”ë“œì˜ ê°€ë…ì„± ë° ìœ ì§€ë³´ìˆ˜ì„±ì´ í¬ê²Œ ì¢‹ì•„ì¡ŒìŠµë‹ˆë‹¤.

ê¶Œí•œ ë•Œë¬¸ì— ê³¨ë¨¸ë¦¬ë¥¼ ì•“ê³  ìˆë‹¤ë©´,
**ABAC**ì„ í•œ ë²ˆ ê³ ë ¤í•´ë³´ì„¸ìš”. ì§„ì§œ ì‚¶ì˜ ì§ˆì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.

ì¶”ê°€ë¡œ **Role Explosion** ë¬¸ì œì™€ **ReBAC(Relation-Based Access Control)** ì´ì•¼ê¸°ê°€ ê¶ê¸ˆí•˜ë‹¤ë©´, ì•„ë˜ ë‹¹ê·¼í…Œí¬ ê¸€ì„ ê°•ë ¥ ì¶”ì²œí•©ë‹ˆë‹¤.

[êµ¬ê¸€ì˜ Zanzibar ê¶Œí•œ ê´€ë¦¬ ë°©ì‹, ë‹¹ê·¼ í…Œí¬ ê¸€ ë§í¬](https://medium.com/daangn/%EA%B5%AC%EA%B8%80%EC%B2%98%EB%9F%BC-%EB%B3%B5%EC%9E%A1%ED%95%9C-%EA%B6%8C%ED%95%9C-%EC%89%BD%EA%B2%8C-%EA%B4%80%EB%A6%AC%ED%95%98%EA%B8%B0-feat-graphql-9ce80d34d39b/)

---

ğŸ™Œ ë„ì›€ì´ ëë‹¤ë©´ ëŒ“ê¸€ì´ë‚˜ ì¢‹ì•„ìš” ë¶€íƒë“œë¦½ë‹ˆë‹¤!
